openapi: 3.1.0
info:
  title: DISP API Documentation
  version: 2024.3.1
  description: Combined API documentation for Consent Management (Admin & Individual) and Data Marketplace (Admin & Individual) services.
  contact:
    name: iGrant.io
    email: support@igrant.io
    url: https://igrant.io
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0
servers:
- description: Demo server
  url: https://demo-api.igrant.io
- description: Staging server
  url: https://staging-api.igrant.io
components:
  securitySchemes:
    ApiKey:
      type: apiKey
      in: header
      name: Authorization
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Access token passed with Bearer prefix in Authorization header
paths:
  /config/data-agreement:
    post:
      description: "This endpoint creates a data agreement for an organisation. \nIt also returns the latest revision of the created data agreement.\n"
      operationId: configCreateAgreement
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              properties:
                dataAgreement:
                  allOf:
                  - type: object
                    title: DataAgreement
                    description: 'An agreement contains the specification of a single purpose that can be consented to.  A DataAgreement is universal and can be consented to by *many* individuals through a DataAgreementRecord.

                      '
                    x-not-in-database: false
                    required:
                    - purpose
                    - purposeDescription
                    - controllerUrl
                    - controllerName
                    - policy
                    - lawfulBasis
                    - methodOfUse
                    - active
                    - forgettable
                    - lifecycle
                    properties:
                      policy:
                        $ref: '#/paths/~1config~1policy/post/responses/200/content/application~1json/schema/properties/policy'
                        description: 'Policy under which this DataAgreement shall be governed.  When creating a data agreement, the latest policy can be used to fill the default value,  and organisation admin can decide to change it in the data agreement level.

                          '
                      dataAttributes:
                        type: array
                        items:
                          allOf:
                          - $ref: '#/paths/~1config~1data-agreements~1data-attribute~1%7BdataAttributeId%7D/put/responses/200/content/application~1json/schema/properties/dataAttribute'
                          - type: object
                            properties:
                              restrictions:
                                type: array
                                items:
                                  $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/responses/200/content/application~1json/schema/properties/dataAgreement/properties/dataAttributes/items/allOf/1/properties/restrictions/items'
                        description: 'Data attributes contain specifications of exactly what is collected.

                          '
                      purpose:
                        type: string
                        description: Name of purpose
                      purposeDescription:
                        type: string
                        description: Description of purpose
                      lawfulBasis:
                        type: string
                        format: ''
                        example: ''
                        description: Lawful basis of the agreement - consent / legal_obligation / contract / vital_interest / public_task / legitimate_interest
                        enum:
                        - consent
                        - legal_obligation
                        - contract
                        - vital_interest
                        - public_task
                        - legitimate_interest
                      methodOfUse:
                        type: string
                        format: ''
                        example: ''
                        description: Method of use - null / data_source / data_using_service
                        enum:
                        - null
                        - data_source
                        - data_using_service
                      dpiaDate:
                        type: string
                        format: ''
                        example: ''
                        description: The date on which the DPIA report is generated after a DPIA
                      dpiaSummaryUrl:
                        type: string
                        description: The URl providing the DPIA result reports, summary etc that can be verified by any interested parties
                      signature:
                        $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/responses/200/content/application~1json/schema/properties/dataAgreement/properties/signature'
                        x-fk-model: Signature
                        description: 'Signature of authorising party of DataAgreement (Signatures may be chained in the case of multiple signatures)

                          '
                      active:
                        type: boolean
                        format: ''
                        example: ''
                        description: DataAgreement is active and new DataAgreementRecords can be created
                      forgettable:
                        type: boolean
                        format: ''
                        example: ''
                        description: DataAgreementRecord may be deleted when consent is withdrawn, as its existence is not necessary for auditability.
                      compatibleWithVersionId:
                        type: string
                        format: ''
                        x-fk-model: DataAgreement
                        description: 'WIP: This field indicates that Data Agreement Records may be transferred from this  compatible previous revision of the same DataAgreement

                          '
                      dataUsingServices:
                        type: array
                        items:
                        - $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/responses/200/content/application~1json/schema/properties/dataAgreement/properties/dataUsingServices/items/0'
                      openApiSpecification:
                        type: object
                        description: This field contains OpenAPI specification document describing the API's endpoints, models, and operations.
                      dataSources:
                        type: array
                        items:
                        - $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/responses/200/content/application~1json/schema/properties/dataAgreement/properties/dataSources/items/0'
                  - type: object
                    title: DataAgreementExtras
                    required:
                    - dataExchange
                    properties:
                      dataExchange:
                        type: object
                        description: Data exchange details
                        properties:
                          dataExchangeProfile:
                            type: string
                            description: Data exchange profile
                            enum:
                            - AIP10
                            - OID4VC
                          id:
                            type: string
                            description: Definition id for OID4VC data exchange profile
                          schemaId:
                            type: string
                            description: Schema identifier
                          isExistingSchema:
                            type: boolean
                            description: Is schema existing
                        required:
                        - isExistingSchema
                        - schemaId
                  description: An object of type DataAgreement
              required:
              - dataAgreement
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAgreement:
                    allOf:
                    - $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/responses/200/content/application~1json/schema/properties/dataAgreement'
                    - type: object
                      title: DataAgreementExtras
                      required:
                      - dataExchange
                      properties:
                        dataExchange:
                          type: object
                          description: Data exchange details
                          properties:
                            dataExchangeProfile:
                              type: string
                              description: Data exchange profile
                              enum:
                              - AIP10
                            id:
                              type: string
                              description: Data agreement ID defined in AIP
                            credentialDefinitionId:
                              type: string
                              description: Credential definition identifier
                            schemaId:
                              type: string
                              description: Schema identifier
                            isExistingSchema:
                              type: boolean
                              description: Is schema existing
                            qrId:
                              type: string
                            firebaseDynamicLink:
                              type: string
                            presentationRequest:
                              type: object
                              properties:
                                name:
                                  type: string
                                  description: Name of the presentation request
                                version:
                                  type: string
                                  description: Version of the presentation request
                                requestedAttributes:
                                  type: object
                                  $ref: '#/paths/~1config~1data-agreement/post/responses/200/content/application~1json/schema/properties/dataAgreement/allOf/1/properties/dataExchange/properties/presentationRequest/components/schemas/requestedAttribute'
                                  description: Map of requested attributes
                              components:
                                schemas:
                                  restriction:
                                    type: object
                                    properties:
                                      schemaId:
                                        type: string
                                        description: Schema identifier
                                      credDefId:
                                        type: string
                                        description: Credential definition identifier
                                  requestedAttribute:
                                    type: object
                                    properties:
                                      name:
                                        type: string
                                        description: Name of the requested attribute
                                      restrictions:
                                        type: array
                                        items:
                                          $ref: '#/paths/~1config~1data-agreement/post/responses/200/content/application~1json/schema/properties/dataAgreement/allOf/1/properties/dataExchange/properties/presentationRequest/components/schemas/restriction'
                                        description: List of restrictions for the requested attribute
                          required:
                          - isExistingSchema
                          - schemaId
                  revision:
                    $ref: '#/paths/~1config~1policy~1%7BpolicyId%7D/delete/responses/200/content/application~1json/schema'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create data agreement
      tags:
      - Data Agreement
  /config/data-agreement/{dataAgreementId}:
    get:
      description: 'This endpoint allows the admin to view the latest data agreement defined

        earlier in an organisation. It also returns the latest revision number.

        '
      operationId: configReadAgreement
      parameters:
      - description: Unique ID of an object
        in: path
        name: dataAgreementId
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAgreement:
                    allOf:
                    - $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/responses/200/content/application~1json/schema/properties/dataAgreement'
                    - $ref: '#/paths/~1config~1data-agreement/post/responses/200/content/application~1json/schema/properties/dataAgreement/allOf/1'
                  revision:
                    $ref: '#/paths/~1config~1policy~1%7BpolicyId%7D/delete/responses/200/content/application~1json/schema'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read data agreement
      tags:
      - Data Agreement
    put:
      description: This endpoint allows the admin to update the latest data agreement defined earlier in an organisation. It also returns the updated revision number.
      operationId: configUpdateAgreement
      parameters:
      - description: Unique ID of an object
        in: path
        name: dataAgreementId
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                dataAgreement:
                  allOf:
                  - $ref: '#/paths/~1config~1data-agreement/post/requestBody/content/application~1json/schema/properties/dataAgreement/allOf/0'
                  - $ref: '#/paths/~1config~1data-agreement/post/requestBody/content/application~1json/schema/properties/dataAgreement/allOf/1'
                  description: An object of type DataAgreement
              required:
              - dataAgreement
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAgreement:
                    allOf:
                    - $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/responses/200/content/application~1json/schema/properties/dataAgreement'
                    - $ref: '#/paths/~1config~1data-agreement/post/responses/200/content/application~1json/schema/properties/dataAgreement/allOf/1'
                  revision:
                    $ref: '#/paths/~1config~1policy~1%7BpolicyId%7D/delete/responses/200/content/application~1json/schema'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update data agreement
      tags:
      - Data Agreement
    delete:
      description: This endpoint allows the admin to delete all revisions of a chosen data agreement defined earlier in an organisation.
      operationId: configDeleteAgreement
      parameters:
      - description: Unique ID of an object
        in: path
        name: dataAgreementId
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/paths/~1config~1policy~1%7BpolicyId%7D/delete/responses/200/content/application~1json/schema'
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Delete data agreement
      tags:
      - Data Agreement
  /config/data-agreements:
    get:
      description: This endpoint allows the admin to read all data agreements and their revisions defined earlier in an organisation.
      operationId: configListAgreement
      parameters:
      - $ref: '#/paths/~1audit~1data-agreements/get/parameters/2'
      - $ref: '#/paths/~1config~1policies/get/parameters/1'
      - $ref: '#/paths/~1config~1policies/get/parameters/2'
      - description: Filtering data agreements by draft/completed status
        in: query
        name: lifecycle
        schema:
          type: string
      - description: Data exchange target
        in: query
        name: target
        required: false
        schema:
          type: string
          enum:
          - digital_wallet
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAgreements:
                    items:
                      allOf:
                      - $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/responses/200/content/application~1json/schema/properties/dataAgreement'
                      - $ref: '#/paths/~1config~1data-agreement/post/responses/200/content/application~1json/schema/properties/dataAgreement/allOf/1'
                    type: array
                  pagination:
                    $ref: '#/paths/~1config~1policies/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all data agreements
      tags:
      - Data Agreement
  /config/data-agreement/{dataAgreementId}/revisions:
    get:
      description: This endpoint lists all revisions of a data agreement defined earlier in an organisation.
      operationId: configListAgreementRevisions
      parameters:
      - $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/parameters/0'
      - $ref: '#/paths/~1config~1policies/get/parameters/1'
      - $ref: '#/paths/~1config~1policies/get/parameters/2'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAgreement:
                    $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/responses/200/content/application~1json/schema/properties/dataAgreement'
                  pagination:
                    $ref: '#/paths/~1config~1policies/get/responses/200/content/application~1json/schema/properties/pagination'
                  revisions:
                    items:
                      $ref: '#/paths/~1config~1policy~1%7BpolicyId%7D/delete/responses/200/content/application~1json/schema'
                    type: array
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List data agreement revisions
      tags:
      - Data Agreement
      x-specification-crudl-model: Revision
      x-specification-pii-or-sensitive: 'False'
      x-specification-scenario: ''
  /config/data-agreement/{dataAgreementId}/data-attributes:
    get:
      description: This endpoint reads all data attrinbutes defined in a data agreement.
      operationId: configListDataAttribute
      parameters:
      - $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/parameters/0'
      - $ref: '#/paths/~1config~1policies/get/parameters/1'
      - $ref: '#/paths/~1config~1policies/get/parameters/2'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAttributes:
                    items:
                      allOf:
                      - $ref: '#/paths/~1config~1data-agreements~1data-attribute~1%7BdataAttributeId%7D/put/responses/200/content/application~1json/schema/properties/dataAttribute'
                      - properties:
                          dataAgreement:
                            $ref: '#/paths/~1config~1data-agreements~1data-attributes/get/responses/200/content/application~1json/schema/properties/dataAttributes/items/allOf/1/properties/dataAgreement'
                        type: object
                    type: array
                  pagination:
                    $ref: '#/paths/~1config~1policies/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read data attributes
      tags:
      - Data Attribute
  /config/data-agreements/data-attribute/{dataAttributeId}:
    put:
      description: This endpoint updates an existing data attribute defined in a data agreement. If updated, the associated data agreement revision is incremented automatically.
      operationId: configUpdateDataAttribute
      parameters:
      - description: Unique ID of an object
        in: path
        name: dataAttributeId
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                dataAttribute:
                  $ref: '#/paths/~1config~1data-agreements~1data-attribute~1%7BdataAttributeId%7D/put/responses/200/content/application~1json/schema/properties/dataAttribute'
                  description: An object of type DataAttribute
              required:
              - dataAttribute
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAttribute:
                    type: object
                    description: Data attributes contain specifications of exactly what is collected.
                    x-not-in-database: false
                    required:
                    - name
                    - description
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: Data attribute ID
                      name:
                        type: string
                        format: ''
                        example: ''
                        description: Name of the attribute, for instance "name" or "age"
                      description:
                        type: string
                        format: ''
                        example: ''
                        description: Description of the attribute
                      sensitivity:
                        type: boolean
                        format: ''
                        example: ''
                        description: Sensitivity of data attribute
                      category:
                        type: string
                        format: ''
                        example: ''
                        description: Category of data attribute
                      scope:
                        type: string
                        format: ''
                        example: ''
                        description: Scope required for data attribute
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update data attribute
      tags:
      - Data Attribute
  /config/data-agreements/data-attributes:
    get:
      description: This endpoint reads all data attrinbutes defined in a data agreement with pagination.
      operationId: configListDataAttribute
      parameters:
      - $ref: '#/paths/~1audit~1data-agreements/get/parameters/2'
      - $ref: '#/paths/~1config~1policies/get/parameters/1'
      - $ref: '#/paths/~1config~1policies/get/parameters/2'
      - description: Method of use - null / data_source / data_using_service
        in: query
        name: methodOfUse
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAttributes:
                    items:
                      allOf:
                      - $ref: '#/paths/~1config~1data-agreements~1data-attribute~1%7BdataAttributeId%7D/put/responses/200/content/application~1json/schema/properties/dataAttribute'
                      - properties:
                          dataAgreement:
                            type: object
                            properties:
                              id:
                                type: string
                              purpose:
                                type: string
                        type: object
                    type: array
                  pagination:
                    $ref: '#/paths/~1config~1policies/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all data attributes
      tags:
      - Data Attribute
  /config/policy:
    post:
      description: This endpoint creates a new data policy that can be reused as global parameter across all newly crearted data agremements.
      operationId: configCreatePolicy
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              properties:
                policy:
                  $ref: '#/paths/~1config~1policy/post/responses/200/content/application~1json/schema/properties/policy'
                  description: An object of type Policy
              required:
              - policy
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  policy:
                    type: object
                    title: Policy
                    description: A policy governs data and DataAgreement in the realm of an organisation that is refered to as "data controller" (GDPR) and owner of referencing Agreements.
                    x-not-in-database: false
                    required:
                    - name
                    - url
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: ''
                      name:
                        type: string
                        format: ''
                        example: ''
                        description: Name of the policy
                      version:
                        type: string
                        format: ''
                        example: ''
                        description: Version of the policy (it can follow the semver format)
                      url:
                        type: string
                        format: ''
                        example: ''
                        description: Permanent URL at which this very version of the Policy can be read, should not be allowed to change over time
                      jurisdiction:
                        type: string
                        format: ''
                        example: ''
                        description: Jurisdiction
                      industrySector:
                        type: string
                        format: ''
                        example: ''
                        description: Industry sector
                      dataRetentionPeriodDays:
                        type: integer
                        format: ''
                        example: ''
                        description: Data retention period in days
                      geographicRestriction:
                        type: string
                        format: ''
                        example: ''
                        description: Geographic restriction
                      storageLocation:
                        type: string
                        format: ''
                        example: ''
                        description: Storage location
                      thirdPartyDataSharing:
                        type: boolean
                        format: ''
                        example: true
                        description: Third party data sharing
                  revision:
                    $ref: '#/paths/~1config~1policy~1%7BpolicyId%7D/delete/responses/200/content/application~1json/schema'
                type: object
          description: A set consisting of the new Policy object created, together with the initial Revision object.
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create data policy
      tags:
      - Data Policy
  /config/policy/{policyId}:
    get:
      description: This endpoint reads a data policy with the latest revision info.
      operationId: configReadPolicy
      parameters:
      - description: Unique ID of an object
        in: path
        name: policyId
        required: true
        schema:
          type: string
      - description: An object with id revisionId
        in: query
        name: revisionId
        required: false
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  policy:
                    $ref: '#/paths/~1config~1policy/post/responses/200/content/application~1json/schema/properties/policy'
                  revision:
                    $ref: '#/paths/~1config~1policy~1%7BpolicyId%7D/delete/responses/200/content/application~1json/schema'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read data policy
      tags:
      - Data Policy
    put:
      description: This endpoint is used to update and existing data policy. It updates the existing and returns the updated version info. Updating a data policy does not affect existing data agreements.
      operationId: configUpdatePolicy
      parameters:
      - description: Unique ID of an object
        in: path
        name: policyId
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                policy:
                  $ref: '#/paths/~1config~1policy/post/responses/200/content/application~1json/schema/properties/policy'
                  description: An object of type Policy
              required:
              - policy
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  policy:
                    $ref: '#/paths/~1config~1policy/post/responses/200/content/application~1json/schema/properties/policy'
                  revision:
                    $ref: '#/paths/~1config~1policy~1%7BpolicyId%7D/delete/responses/200/content/application~1json/schema'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update data policy
      tags:
      - Data Policy
    delete:
      description: This endpoint is used to delete an existing data policy.
      operationId: configDeletePolicy
      parameters:
      - description: Unique ID of an object
        in: path
        name: policyId
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                title: Revision
                description: 'A *generic* revision model captures the serialised contents of any schema''s single row. This is then subject to 1) cryptographic signature and 2) auditing.


                  Aside from the "successor" column, a revision should be considered locked.'
                x-not-in-database: false
                required:
                - id
                - schemaName
                - objectId
                - objectData
                - serizalizedSnapshot
                - serializedHash
                - timestamp
                properties:
                  id:
                    type: string
                    format: ''
                    example: ''
                    description: Revision ID
                  schemaName:
                    type: string
                    format: ''
                    example: ''
                    description: Previously "schema" but for technical reasons should be called "schemaName"
                    enum:
                    - dataAgreement
                    - policy
                    - dataAgreementRecord
                  objectId:
                    type: string
                    format: ''
                    example: ''
                    description: The PK of the object that was serialised
                  objectData:
                    type: string
                    format: ''
                    example: ''
                    description: The object that is serialised
                  signedWithoutObjectId:
                    type: boolean
                    format: ''
                    example: ''
                    description: Indicates that objectId was left blank in serizalizedSnapshot when calculating serializedHash. objectId may subsequently be filled in.
                  serizalizedSnapshot:
                    type: string
                    format: ''
                    example: ''
                    description: 'Revisioned data (sed as JSON) as a dict. Apply JSON Canonicalization Scheme as per IETF RFC 8785.  It contains all the fields of the schema except sucessorId, serializedHash, serializedSnapshot.

                      '
                  serializedHash:
                    type: string
                    format: ''
                    example: ''
                    description: Hash of serizalizedSnapshot (SHA-1)
                  timestamp:
                    type: string
                    format: ''
                    example: ''
                    description: Timestamp of when revisioning happened. It should be ISO 8601 UTC date time
                  authorizedByIndividualId:
                    description: Individual ID
                    type: string
                  authorizedByOtherId:
                    type: string
                    format: ''
                    example: ''
                    description: Reference to an admin user that has created this revision
                  successorId:
                    x-fk-model: Revision
                    type: string
                    description: If this revision is no longer the latest revision, refer to its successor
                  predecessorHash:
                    type: string
                    format: ''
                    example: ''
                    description: Tamper-resistent artifact from previous record, copied from serializedHash
                  predecessorSignature:
                    type: string
                    format: ''
                    example: ''
                    description: Tamper-resistent artifact from previous record (we don't know if the previous record was signed or not)
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Delete data policy
      tags:
      - Data Policy
  /config/policies:
    get:
      description: This endpoint reads all data policies defined in the consent building block.
      operationId: configListPolicy
      parameters:
      - description: An object with ID revisionId
        in: query
        name: revisionId
        required: false
        schema:
          type: string
      - description: Requested index for start of resources to be provided in response requested by client
        in: query
        name: offset
        required: false
        schema:
          type: integer
      - name: limit
        in: query
        description: Number of items returned per page. Requested number of resources to be provided in response requested by client.
        required: false
        schema:
          type: integer
          default: 10
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  pagination:
                    type: object
                    title: Pagination
                    properties:
                      currentPage:
                        type: integer
                        description: Current page number
                      totalItems:
                        type: integer
                        description: Total number of items available
                      totalPages:
                        type: integer
                        description: Total number of pages based on limit
                      limit:
                        type: integer
                        description: Number of items per page
                      hasPrevious:
                        type: boolean
                        description: Indicates if there's a previous page
                      hasNext:
                        type: boolean
                        description: Indicates if there's a next page
                  policies:
                    items:
                      $ref: '#/paths/~1config~1policy/post/responses/200/content/application~1json/schema/properties/policy'
                    type: array
                type: object
          description: A list of Policy objects readable for the current session's credentials.
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all data policies
      tags:
      - Data Policy
  /config/policy/{policyId}/revisions:
    get:
      description: This endpoint reads all data policy revisions defined in the consent building block.
      operationId: configListPolicyRevisions
      parameters:
      - description: Unique ID of an object
        in: path
        name: policyId
        required: true
        schema:
          type: string
      - $ref: '#/paths/~1config~1policies/get/parameters/1'
      - $ref: '#/paths/~1config~1policies/get/parameters/2'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  pagination:
                    $ref: '#/paths/~1config~1policies/get/responses/200/content/application~1json/schema/properties/pagination'
                  policy:
                    $ref: '#/paths/~1config~1policy/post/responses/200/content/application~1json/schema/properties/policy'
                  revisions:
                    items:
                      $ref: '#/paths/~1config~1policy~1%7BpolicyId%7D/delete/responses/200/content/application~1json/schema'
                    type: array
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List data policy revisions
      tags:
      - Data Policy
  /config/individual:
    post:
      description: This endpoint creates an individual for an organisation in the consent building block. This is used to onboard existing or new users.
      operationId: configCreateIndividual
      requestBody:
        content:
          application/json:
            schema:
              properties:
                individual:
                  allOf:
                  - type: object
                    title: Individual
                    description: Shallowly models an Individual which may reference some instance in an external system (registration system, functional ID, foundational ID etc). An Individual instance of this model is not to be mistaken with a unique natural individual. It is up to the system owner to decide if this record permits mapping to a natural individual and/or if a single Individual row can map to several consent agreements.
                    x-not-in-database: false
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: The unique ID of an Individual row.
                      externalId:
                        type: string
                        format: ''
                        example: ''
                        description: Reference to another foundational/functional ID, which is likely PII
                      externalIdType:
                        type: string
                        format: ''
                        example: ''
                        description: External ID type specifier. A string. For instance "email" or "foundational ID". Can be used in later queries.
                      identityProviderId:
                        type: string
                        format: ''
                        example: ''
                        description: This could be an FK, but for now we do not have a mapping of identity providers. IDBB may have more requirements.
                  - type: object
                    title: IndividualExtras
                    required:
                    - name
                    - email
                    - phone
                    properties:
                      name:
                        type: string
                        description: Name of the individual
                      iamId:
                        type: string
                        description: Create a user in keycloak and save the `id` as `iamId`
                      email:
                        type: string
                        description: Email ID
                      phone:
                        type: string
                        description: Phone
                      pushNotificationToken:
                        type: string
                        description: Device token of the individual
                      deviceType:
                        type: string
                        description: Device type(OS) of the individual
                        enum:
                        - android
                        - ios
                      mapperId:
                        type: string
                        description: Defines the mapper id of the individual
                  description: An object of type Individual
              required:
              - individual
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  individual:
                    allOf:
                    - $ref: '#/paths/~1config~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/0'
                    - $ref: '#/paths/~1config~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/1'
                    description: An object of type Individual
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create individual
      tags:
      - Individual
  /config/individual/{individualId}:
    get:
      description: This endpoint is used to read an individual info defined for an organisation in the consent building block.
      operationId: configReadIndividual
      parameters:
      - description: Unique ID of an object
        in: path
        name: individualId
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  individual:
                    allOf:
                    - $ref: '#/paths/~1config~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/0'
                    - $ref: '#/paths/~1config~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/1'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read individual
      tags:
      - Individual
    put:
      description: This endpoint is used to udpated an individual for an organisation defined in the consent building block.
      operationId: configUpdateIndividual
      parameters:
      - description: Unique ID of an object
        in: path
        name: individualId
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                individual:
                  allOf:
                  - $ref: '#/paths/~1config~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/0'
                  - $ref: '#/paths/~1config~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/1'
                  description: An object of type Individual
              required:
              - individual
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  individual:
                    allOf:
                    - $ref: '#/paths/~1config~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/0'
                    - $ref: '#/paths/~1config~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/1'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update individual
      tags:
      - Individual
  /config/individuals:
    get:
      description: This endpoint is used to list all individuals in the organisation defined in the consent building block.
      operationId: configListIndividuals
      parameters:
      - $ref: '#/paths/~1config~1policies/get/parameters/1'
      - $ref: '#/paths/~1config~1policies/get/parameters/2'
      - description: Unique ID of an object
        in: query
        name: externalIndividualId
        required: false
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  individuals:
                    items:
                      allOf:
                      - $ref: '#/paths/~1config~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/0'
                      - $ref: '#/paths/~1config~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/1'
                    type: array
                  pagination:
                    $ref: '#/paths/~1config~1policies/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all individuals
      tags:
      - Individual
  /audit/consent-records:
    get:
      description: This endpoint is used to fetch all consent records with pagination for individuals in an organisation defined in the consent building block.
      operationId: auditDataAgreementRecordsList
      parameters:
      - $ref: '#/paths/~1config~1policies/get/parameters/1'
      - $ref: '#/paths/~1config~1policies/get/parameters/2'
      - description: Unique ID of an object
        in: query
        name: lawfulBasis
        schema:
          type: string
          description: Lawful basis of the agreement - consent / legal_obligation / contract / vital_interest / public_task / legitimate_interest
          enum:
          - consent
          - legal_obligation
          - contract
          - vital_interest
          - public_task
          - legitimate_interest
      - description: ID contains individual ID, data agreement ID or consent record ID
        in: query
        name: id
        schema:
          type: string
      - description: sector of the object
        in: query
        name: sector
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecords:
                    items:
                      allOf:
                      - $ref: '#/paths/~1audit~1consent-record~1%7BconsentRecordId%7D/get/responses/200/content/application~1json/schema/properties/consentRecord'
                      - type: object
                        properties:
                          timestamp:
                            type: string
                          dataAgreement:
                            type: object
                            properties:
                              version:
                                type: string
                                description: Version of data agreement
                              purpose:
                                type: string
                                description: Name of purpose
                              lawfulBasis:
                                type: string
                                format: ''
                                example: ''
                                description: Lawful basis of the agreement - consent / legal_obligation / contract / vital_interest / public_task / legitimate_interest
                                enum:
                                - consent
                                - legal_obligation
                                - contract
                                - vital_interest
                                - public_task
                                - legitimate_interest
                    type: array
                  pagination:
                    $ref: '#/paths/~1config~1policies/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Fetch all consent records
      tags:
      - Audit
  /audit/consent-record/{consentRecordId}:
    get:
      description: This endpoint is used to get a single consent record by ID in an organisation defined in the consent building block.
      operationId: auditConsentRecordRead
      parameters:
      - description: Unique ID of an object
        in: path
        name: consentRecordId
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecord:
                    type: object
                    title: ConsentRecord
                    description: A consent record expresses consent (as defined in this building block's specification) to a single DataAgreement. There must be a UNIQUE constraint on (data agreement revision, individual)
                    x-not-in-database: false
                    required:
                    - id
                    - agreementRevisionHash
                    - state
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: Objects may be passed back by some API endpoints without an ID (PK), denoting that they are a "draft", i.e. a ConsentRecord that is not yet stored in the database and only exist in transit. Draft ConsentRecords do not have a Revision, but if paired up with a Signature, a valid Revision should be generated.
                      dataAgreementId:
                        type: string
                        x-fk-model: DataAgreement
                        description: The DataAgreement to which consent has been given
                      dataAgreementRevisionId:
                        type: string
                        x-fk-model: Revision
                        description: The Revision of the data agreement which consent has been given to
                      dataAgreementRevisionHash:
                        type: string
                        format: ''
                        example: ''
                        description: Copy of the revision hash. The hash is the included in the signature and ensures against tampering with the original agreement.
                      individualId:
                        type: string
                        x-fk-model: Individual
                        description: The Individual who has signed this consent record
                      optIn:
                        type: boolean
                        format: ''
                        example: ''
                        description: 'True: The individual has positively opted in. False: The individual has explicitly said no (or withdrawn a previous consent).'
                      state:
                        type: string
                        format: ''
                        example: ''
                        description: 'The state field is used to record state changes after-the-fact. It is maintained by the Consent BB itself. Valid states: unsigned/pending more signatures/signed'
                        enum:
                        - unsigned
                        - signed
                      signatureId:
                        type: string
                        x-fk-model: Signature
                        description: 'A signature that hashes all the values of the consent record and has signed it with the key of the Invidiual, making it verifiable and tamper-proof. TBD: Relation to a Signature schema?'
                      sectorPreferences:
                        type: array
                        items:
                          type: object
                          description: specifies the preferred sector details
                          x-not-in-database: false
                          required:
                          - sector
                          - location
                          properties:
                            sector:
                              type: string
                              format: ''
                              example: ''
                              description: Name of the sector
                            optIn:
                              type: boolean
                              description: Defines sector is opted in or not
                            isLastUpdated:
                              type: boolean
                              description: Defines consent record for this sector is last updated
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Get consent record
      tags:
      - Audit
  /audit/data-agreements:
    get:
      description: This endpoint is used to fetch all data agreements defined in the consent building block.
      operationId: auditDataAgreementList
      parameters:
      - $ref: '#/paths/~1config~1policies/get/parameters/1'
      - $ref: '#/paths/~1config~1policies/get/parameters/2'
      - description: An object with ID revisionId
        in: query
        name: revisionId
        required: false
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAgreements:
                    items:
                      $ref: '#/paths/~1audit~1data-agreement~1%7BdataAgreementId%7D/get/responses/200/content/application~1json/schema/properties/dataAgreement'
                    type: array
                  pagination:
                    $ref: '#/paths/~1config~1policies/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Fetch all data agreements
      tags:
      - Audit
  /audit/data-agreement/{dataAgreementId}:
    get:
      description: This endpoint is used to fetch a single data agreement for audit purposes, e.g. by an external third party.
      operationId: auditReadRecord
      parameters:
      - description: Unique ID of an object
        in: path
        name: dataAgreementId
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAgreement:
                    type: object
                    title: DataAgreement
                    description: 'An agreement contains the specification of a single purpose that can be consented to.  A DataAgreement is universal and can be consented to by *many* individuals through a DataAgreementRecord.

                      '
                    x-not-in-database: false
                    required:
                    - purpose
                    - purposeDescription
                    - controllerUrl
                    - controllerName
                    - policy
                    - lawfulBasis
                    - methodOfUse
                    - active
                    - forgettable
                    - lifecycle
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: ''
                      version:
                        type: string
                        format: ''
                        example: ''
                        description: The version of this specification to which a receipt conforms
                      controllerId:
                        type: string
                        description: ID of the controller
                      controllerUrl:
                        type: string
                        description: URL of data controller (may be omitted if no data involved)
                      controllerName:
                        type: string
                        description: Name of data controller (may be omitted if no data involved)
                      policy:
                        $ref: '#/paths/~1config~1policy/post/responses/200/content/application~1json/schema/properties/policy'
                        description: 'Policy under which this DataAgreement shall be governed.  When creating a data agreement, the latest policy can be used to fill the default value,  and organisation admin can decide to change it in the data agreement level.

                          '
                      dataAttributes:
                        type: array
                        items:
                          allOf:
                          - $ref: '#/paths/~1config~1data-agreements~1data-attribute~1%7BdataAttributeId%7D/put/responses/200/content/application~1json/schema/properties/dataAttribute'
                          - type: object
                            properties:
                              restrictions:
                                type: array
                                items:
                                  type: object
                                  description: List of restrictions
                                  x-not-in-database: false
                                  properties:
                                    credDefId:
                                      type: string
                                      format: ''
                                      example: H3DW1MUWZyBkP5LG4rTYRH:3:CL:80:default
                                      description: Credential definition ID
                                    schemaId:
                                      type: string
                                      format: ''
                                      example: H3DW1MUWZyBkP5LG4rTYRH:2:Certificate Of Registration:6.0.0
                                      description: Schema ID
                        description: 'Data attributes contain specifications of exactly what is collected.

                          '
                      purpose:
                        type: string
                        description: Name of purpose
                      purposeDescription:
                        type: string
                        description: Description of purpose
                      lawfulBasis:
                        type: string
                        format: ''
                        example: ''
                        description: Lawful basis of the agreement - consent / legal_obligation / contract / vital_interest / public_task / legitimate_interest
                        enum:
                        - consent
                        - legal_obligation
                        - contract
                        - vital_interest
                        - public_task
                        - legitimate_interest
                      methodOfUse:
                        type: string
                        format: ''
                        example: ''
                        description: Method of use - null / data_source / data_using_service
                        enum:
                        - null
                        - data_source
                        - data_using_service
                      dpiaDate:
                        type: string
                        format: ''
                        example: ''
                        description: The date on which the DPIA report is generated after a DPIA
                      dpiaSummaryUrl:
                        type: string
                        description: The URl providing the DPIA result reports, summary etc that can be verified by any interested parties
                      signature:
                        x-fk-model: Signature
                        description: 'Signature of authorising party of DataAgreement (Signatures may be chained in the case of multiple signatures)

                          '
                        type: object
                        title: Signature
                        x-not-in-database: false
                        required:
                        - payload
                        - signature
                        - verificationMethod
                        - verificationPayload
                        - verificationPayloadHash
                        - verificationSignedBy
                        - timestamp
                        properties:
                          id:
                            type: string
                            format: ''
                            example: ''
                            description: Objects may be passed back by some API endpoints without an id (PK), denoting that they are a "draft", i.e. a Signature that is not yet stored in the database and only exists in transit.
                          payload:
                            type: string
                            format: ''
                            example: ''
                            description: 'The final payload that is signed, constructed as a JSON serialisation of fields {verificationPayload: ..., verificationPayloadHash: ..., verificationMethod: ..., verificationArtifact: ..., verificationSignedBy: ..., verificationJwsHeader, timestamp: ..., signedWithoutObjectReference: ..., objectType: ..., objectReference: ...}. Serialised as a JSON dict. If the signature is generated before anything is stored in the database (and has a PK), then the objectReference should be omitted from the payload but filled in afterwards.'
                          signature:
                            type: string
                            format: ''
                            example: ''
                            description: Signature of payload hash, the format of the signature should be specified by either verificationMethod or verificationJwsHeader
                          verificationMethod:
                            type: string
                            format: ''
                            example: ''
                            description: 'A well-known string denoting which method is used. Valid values: TBD. This might be expanded with supported verification methods. There may be a minimal set of supported methods necessary.'
                          verificationPayload:
                            type: string
                            format: ''
                            example: ''
                            description: Internally generated serialised version of the data referenced by objectType and objectReference - by extracting and serialising their data as JSON
                          verificationPayloadHash:
                            type: string
                            format: ''
                            example: ''
                            description: Internally generated cryptographic hash of the value to be signed, i.e. the value of verificationPayload
                          verificationArtifact:
                            type: string
                            format: ''
                            example: ''
                            description: A verification artifact in the form of a scanned object, image, signature etc
                          verificationSignedBy:
                            type: string
                            format: ''
                            example: ''
                            description: Because an identifier's information may change over time, there is a need to store that information at the time of signing. In the case of a cryptographic signature, this field should contain some identifier for looking up or verifying the public key of the signing party. In the case of a non-cryptographic signature, this field could contain a natural individual's names, personal number, email addresses - store a snapshot that binds to the signature at the time of signing. In the case of a cryptographic signature, this may be the fingerprint of the individual's public key or in some cases, a token from the user's ID session.
                          verificationSignedAs:
                            type: string
                            format: ''
                            example: ''
                            description: 'DRAFT FIELD: Specifies the relationship between the authorising signature and the invidual which the payload concerns. This is relevant for Consent Records. Possible values: "individual" / "delegate".'
                          verificationJwsHeader:
                            type: string
                            format: ''
                            example: ''
                            description: Alternative to the verificationMethod, verificationHash and verificationSignature, give a JWS serialised object (RFC7515)
                          timestamp:
                            type: string
                            format: ''
                            example: ''
                            description: Timestamp of signature, currently this field isn't part of the payload so it's not tamper-proof
                          signedWithoutObjectReference:
                            type: boolean
                            format: ''
                            example: ''
                            description: Indicates that objectReference was left blank in the serialised version that was signed
                          objectType:
                            type: string
                            format: ''
                            example: ''
                            description: 'Name of the schema model that objectReference points to. Values: "signature" or "revision"'
                            enum:
                            - revision
                            - signature
                          objectReference:
                            type: string
                            format: ''
                            example: ''
                            description: A symmetric relation / back reference to the objectType that was signed. We are currently just modelling signing another signature (a chain) or signing a Revision (which can be a revision of a consent record, an agreement, policy etc).
                      active:
                        type: boolean
                        format: ''
                        example: ''
                        description: DataAgreement is active and new DataAgreementRecords can be created
                      forgettable:
                        type: boolean
                        format: ''
                        example: ''
                        description: DataAgreementRecord may be deleted when consent is withdrawn, as its existence is not necessary for auditability.
                      compatibleWithVersionId:
                        type: string
                        format: ''
                        x-fk-model: DataAgreement
                        description: 'WIP: This field indicates that Data Agreement Records may be transferred from this  compatible previous revision of the same DataAgreement

                          '
                      lifecycle:
                        type: string
                        description: 'WIP: Current Lifecycle state of the DataAgreement.  Lifecycle states are used to manage internal workflows and  should not be assigned semantic meanings for active Data Agreement Records.

                          '
                        enum:
                        - draft
                        - complete
                      dataUsingServices:
                        type: array
                        items:
                        - type: object
                          description: Data using service organisation for the data agreement
                          x-not-in-database: false
                          required:
                          - name
                          - sector
                          - location
                          properties:
                            name:
                              type: string
                              format: ''
                              example: ''
                              description: Name of the data using service organisation
                            sector:
                              type: string
                              format: ''
                              example: ''
                              description: Defines sector of the organisation
                            location:
                              type: string
                              format: ''
                              example: ''
                              description: Defines location of the organisation
                            privacyDashboardUrl:
                              type: string
                              format: ''
                              example: ''
                              description: Defines privacy dashboard url of the organisation
                      openApiSpecification:
                        type: object
                        description: This field contains OpenAPI specification document describing the API's endpoints, models, and operations.
                      dataSources:
                        type: array
                        items:
                        - type: object
                          description: Data source organisation for the data agreement
                          x-not-in-database: false
                          required:
                          - name
                          - sector
                          - location
                          properties:
                            name:
                              type: string
                              format: ''
                              example: ''
                              description: Name of the data source organisation
                            sector:
                              type: string
                              format: ''
                              example: ''
                              description: Defines sector of the organisation
                            location:
                              type: string
                              format: ''
                              example: ''
                              description: Defines location of the organisation
                            privacyDashboardUrl:
                              type: string
                              format: ''
                              example: ''
                              description: Defines privacy dashboard url of the organisation
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Get data agreement
      tags:
      - Audit
  /config/webhook:
    post:
      deprecated: false
      description: This endpoint is used to create a webhook to trigger events to an external IT system.
      operationId: configCreateWebhook
      requestBody:
        content:
          application/json:
            schema:
              properties:
                webhook:
                  required:
                  - payloadUrl
                  - contentType
                  - subscribedEvents
                  - disabled
                  - secretKey
                  - skipSslVerification
                  - timestamp
                  type: object
                  title: Webhook
                  properties:
                    payloadUrl:
                      type: string
                      description: Webhook payload Url
                    contentType:
                      type: string
                      description: Webhook payload content type
                      enum:
                      - application/json
                      - application/x-www-form-urlencoded
                    subscribedEvents:
                      type: object
                      title: subscribedEvents
                      properties:
                        consentManagementWebhook:
                          type: array
                          items:
                            type: string
                            description: Subscribed event
                            enum:
                            - data.update.initiated
                            - data.update.cancelled
                            - consent.allowed
                            - consent.disallowed
                            - consent.auto_expiry
                            - org.unsubscribed
                            - data.delete.initiated
                            - data.download.initiated
                            - data.delete.cancelled
                            - data.download.cancelled
                            - org.subscribed
                        digitalWalletWebhook:
                          type: array
                          items:
                            type: string
                            description: Subscribed event
                            enum:
                            - digitalwallet.connection.init
                            - digitalwallet.connection.invitation
                            - digitalwallet.connection.request
                            - digitalwallet.connection.response
                            - digitalwallet.connection.active
                            - digitalwallet.connection.error
                            - digitalwallet.connection.inactive
                            - digitalwallet.connection.delete
                            - digitalwallet.credential.proposal_sent
                            - digitalwallet.credential.proposal_received
                            - digitalwallet.credential.offer_sent
                            - digitalwallet.credential.offer_received
                            - digitalwallet.credential.request_sent
                            - digitalwallet.credential.request_received
                            - digitalwallet.credential.credential_issued
                            - digitalwallet.credential.credential_received
                            - digitalwallet.credential.credential_acked
                            - digitalwallet.presentation.proposal_sent
                            - digitalwallet.presentation.proposal_received
                            - digitalwallet.presentation.request_sent
                            - digitalwallet.presentation.request_received
                            - digitalwallet.presentation.presentation_sent
                            - digitalwallet.presentation.presentation_received
                            - digitalwallet.presentation.verified
                            - digitalwallet.presentation.presentation_acked
                            - openid.credential.offer_sent
                            - openid.credential.offer_received
                            - openid.credential.credential_issued
                            - openid.credential.credential_acked
                            - openid.credential.credential_pending
                            - openid.presentation.request_sent
                            - openid.presentation.request_sent.v3
                            - openid.presentation.request_received
                            - openid.presentation.request_received.v3
                            - openid.presentation.presentation_acked
                            - openid.presentation.presentation_acked.v3
                            - openid.presentation.presentation_pending
                            - openid.presentation.presentation_pending.v3
                        dataMarketplaceWebhook:
                          type: array
                          items:
                            type: string
                            description: Subscribed event
                            enum:
                            - datamarketplace.data_disclosure_agreement_record
                    disabled:
                      type: boolean
                      description: Is webhook disabled or not
                    secretKey:
                      type: string
                      description: Secret key for checking authenticity of the source
                    skipSslVerification:
                      type: boolean
                      description: Skip SSL verification for webhook Url
              type: object
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                properties:
                  webhook:
                    required:
                    - payloadUrl
                    - contentType
                    - subscribedEvents
                    - disabled
                    - secretKey
                    - skipSslVerification
                    - timestamp
                    type: object
                    title: Webhook
                    properties:
                      id:
                        type: string
                        description: Webhook ID
                      orgId:
                        type: string
                        description: Organisation ID
                      payloadUrl:
                        type: string
                        description: Webhook payload Url
                      contentType:
                        type: string
                        description: Webhook payload content type
                        enum:
                        - application/json
                        - application/x-www-form-urlencoded
                      subscribedEvents:
                        $ref: '#/paths/~1config~1webhook/post/requestBody/content/application~1json/schema/properties/webhook/properties/subscribedEvents'
                      disabled:
                        type: boolean
                        description: Is webhook disabled or not
                      secretKey:
                        type: string
                        description: Secret key for checking authenticity of the source
                      skipSslVerification:
                        type: boolean
                        description: Skip SSL verification for webhook Url
                      timestamp:
                        type: string
                        description: Creation timestamp
                type: object
          description: Created
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create webhook
      tags:
      - Webhook
  /config/webhook/{webhookId}:
    get:
      deprecated: false
      description: This endpoint is used to read a webhook by its ID.
      operationId: configReadWebhook
      parameters:
      - in: path
        name: webhookId
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  webhook:
                    $ref: '#/paths/~1config~1webhook/post/responses/201/content/application~1json/schema/properties/webhook'
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read webhook
      tags:
      - Webhook
    put:
      deprecated: false
      description: This endpoint is used to update an existing webhook to trigger events to an external IT system.
      operationId: configUpdateWebhook
      parameters:
      - in: path
        name: webhookId
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              properties:
                webhook:
                  $ref: '#/paths/~1config~1webhook/post/requestBody/content/application~1json/schema/properties/webhook'
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  webhook:
                    $ref: '#/paths/~1config~1webhook/post/responses/201/content/application~1json/schema/properties/webhook'
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update webhook
      tags:
      - Webhook
    delete:
      deprecated: false
      description: This endpoint is used to delete an existing webhook that was defined to trigger events to an external IT system.
      operationId: configDeleteWebhook
      parameters:
      - in: path
        name: webhookId
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  webhook:
                    $ref: '#/paths/~1config~1webhook/post/responses/201/content/application~1json/schema/properties/webhook'
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Delete webhook
      tags:
      - Webhook
  /config/webhooks:
    get:
      deprecated: false
      description: This endpoint is used to get all webhooks that was defined to trigger events to an external IT system.
      operationId: configListWebhooks
      parameters:
      - $ref: '#/paths/~1config~1policies/get/parameters/1'
      - $ref: '#/paths/~1config~1policies/get/parameters/2'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  pagination:
                    $ref: '#/paths/~1config~1policies/get/responses/200/content/application~1json/schema/properties/pagination'
                  webhooks:
                    items:
                      description: Webhook
                      oneOf:
                      - $ref: '#/paths/~1config~1webhook/post/responses/201/content/application~1json/schema/properties/webhook'
                    type: array
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all webhooks
      tags:
      - Webhook
  /config/webhooks/event-types:
    get:
      deprecated: false
      description: This endpoint is used to list all webhook event types.
      operationId: configReadWebhookEventTypes
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentManagementWebhookEventTypes:
                    items:
                      type: string
                      title: consentManagementWebhookEventTypes
                      enum:
                      - consent.allowed
                      - consent.auto_expiry
                      - data.delete.initiated
                      - data.update.initiated
                      - data.download.cancelled
                      - data.update.cancelled
                      - data.download.initiated
                      - data.delete.cancelled
                      - consent.disallowed
                    type: array
                  digitalWalletWebhookEventTypes:
                    items:
                      type: string
                      title: digitalWalletWebhookEventTypes
                      enum:
                      - digitalwallet.connection.init
                      - digitalwallet.connection.invitation
                      - digitalwallet.connection.request
                      - digitalwallet.connection.response
                      - digitalwallet.connection.active
                      - digitalwallet.connection.error
                      - digitalwallet.connection.inactive
                      - digitalwallet.connection.delete
                      - digitalwallet.credential.proposal_sent
                      - digitalwallet.credential.proposal_received
                      - digitalwallet.credential.offer_sent
                      - digitalwallet.credential.offer_received
                      - digitalwallet.credential.request_sent
                      - digitalwallet.credential.request_received
                      - digitalwallet.credential.credential_issued
                      - digitalwallet.credential.credential_received
                      - digitalwallet.credential.credential_acked
                      - digitalwallet.presentation.proposal_sent
                      - digitalwallet.presentation.proposal_received
                      - digitalwallet.presentation.request_sent
                      - digitalwallet.presentation.request_received
                      - digitalwallet.presentation.presentation_sent
                      - digitalwallet.presentation.presentation_received
                      - digitalwallet.presentation.verified
                      - digitalwallet.presentation.presentation_acked
                      - openid.credential.offer_sent
                      - openid.credential.offer_received
                      - openid.credential.credential_issued
                      - openid.credential.credential_acked
                      - openid.credential.credential_pending
                      - openid.presentation.request_sent
                      - openid.presentation.request_sent.v3
                      - openid.presentation.request_received
                      - openid.presentation.request_received.v3
                      - openid.presentation.presentation_acked
                      - openid.presentation.presentation_acked.v3
                      - openid.presentation.presentation_pending
                      - openid.presentation.presentation_pending.v3
                    type: array
                  dataMarketplaceWebhookEventTypes:
                    items:
                      type: string
                      title: dataMarketplaceWebhookEventTypes
                      enum:
                      - datamarketplace.data_disclosure_agreement_record
                    type: array
                required:
                - consentManagementWebhookEventTypes
                - digitalWalletWebhookEventTypes
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read webhook event types
      tags:
      - Webhook
  /config/webhooks/payload/content-types:
    get:
      deprecated: false
      description: This endpoint is used to get webhook content types.
      operationId: getWebhookPayloadContentTypes.yaml
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  ContentTypes:
                    items:
                      enum:
                      - application/json
                      - application/x-www-form-urlencoded
                      type: string
                    type: array
                required:
                - ContentTypes
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all webhook content types
      tags:
      - Webhook
  /service/organisation/coverimage:
    get:
      deprecated: false
      description: This endpoint is used to retrieve the existing cover image for the organisation. The cover image is used to display in the privacy dashboard.
      operationId: serviceReadOrganisationCoverImage
      responses:
        '200':
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read organisation cover image
      tags:
      - Organisation
  /service/organisation/logoimage:
    get:
      deprecated: false
      description: Read organisation logo image This endpoint is used to retrieve the existing logo image for the organisation. The logo image is used to display in the privacy dashboard as well in data sharing UIs.
      operationId: serviceReadOrganisationLogoImage
      responses:
        '200':
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read organisation logo image
      tags:
      - Organisation
  /service/organisation:
    get:
      deprecated: false
      description: This endpoint is used to read the organisation information as configured by the organisation in the consent building block. This is used, for e.g., in the privacy dashboard.
      operationId: serviceReadOrganisation
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  organisation:
                    items:
                      allOf:
                      - required:
                        - name
                        - location
                        - description
                        - policyUrl
                        type: object
                        properties:
                          id:
                            type: string
                            description: Organisation ID
                          name:
                            type: string
                            description: Name of the organisation
                          description:
                            type: string
                            description: Overview for the organisation
                          sector:
                            type: string
                            description: Sector
                          location:
                            type: string
                            description: Location
                          policyUrl:
                            type: string
                            description: Policy Url
                      - type: object
                        title: OrganisationExtras
                        properties:
                          coverImageId:
                            type: string
                            description: Cover image ID
                          coverImageUrl:
                            type: string
                            description: Cover image url
                          logoImageId:
                            type: string
                            description: Logo image ID
                          logoImageUrl:
                            type: string
                            description: Logo image url
                required:
                - organisation
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read organisation
      tags:
      - Organisation
  /service/image/{imageId}:
    get:
      deprecated: false
      description: This endpoint is used to read an organisation image as defined in the consent building block.
      operationId: serviceReadOrganisationImage
      responses:
        '200':
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read organisation image
      tags:
      - Organisation
  /service/idp/open-id:
    get:
      description: This endpoint is used to read the IdP details configured by the organisation in the consent building block.
      operationId: serviceReadIdp
      parameters:
      - description: Unique ID of an object
        in: path
        name: idpId
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  idp:
                    type: object
                    x-not-in-database: false
                    required:
                    - id
                    - logoutUrl
                    - clientId
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: IDP ID
                      logoutUrl:
                        type: string
                        description: Logout Url
                      clientId:
                        type: string
                        description: Client ID
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read IdP details
      tags:
      - Identity Provider
  /service/data-agreements:
    get:
      description: This endpoint is used to list all active data agreements by the organisation in consent building block. The results are returned with pagination.
      operationId: serviceAgreementList
      parameters:
      - description: An object with ID revisionId
        in: query
        name: revisionId
        required: false
        schema:
          type: string
      - $ref: '#/paths/~1service~1individuals/get/parameters/0'
      - $ref: '#/paths/~1service~1individuals/get/parameters/1'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAgreements:
                    items:
                      type: object
                      title: DataAgreement
                      description: 'An agreement contains the specification of a single purpose that can be consented to.  A DataAgreement is universal and can be consented to by *many* individuals through a DataAgreementRecord.

                        '
                      x-not-in-database: false
                      required:
                      - purpose
                      - purposeDescription
                      - controllerUrl
                      - controllerName
                      - policy
                      - lawfulBasis
                      - methodOfUse
                      - active
                      - forgettable
                      - lifecycle
                      properties:
                        id:
                          type: string
                          format: ''
                          example: ''
                          description: ''
                        version:
                          type: string
                          format: ''
                          example: ''
                          description: The version of this specification to which a receipt conforms
                        controllerId:
                          type: string
                          description: ID of the controller
                        controllerUrl:
                          type: string
                          description: URL of data controller (may be omitted if no data involved)
                        controllerName:
                          type: string
                          description: Name of data controller (may be omitted if no data involved)
                        policy:
                          $ref: '#/paths/~1service~1policy~1%7BpolicyId%7D/get/responses/200/content/application~1json/schema/properties/policy'
                          description: 'Policy under which this DataAgreement shall be governed.  When creating a data agreement, the latest policy can be used to fill the default value,  and organisation admin can decide to change it in the data agreement level.

                            '
                        dataAttributes:
                          type: array
                          items:
                            allOf:
                            - $ref: '#/paths/~1service~1data-agreement~1%7BdataAgreementId%7D~1data-attributes/get/responses/200/content/application~1json/schema/properties/dataAttributes/items'
                            - type: object
                              properties:
                                restrictions:
                                  type: array
                                  items:
                                    type: object
                                    description: List of restrictions
                                    x-not-in-database: false
                                    properties:
                                      credDefId:
                                        type: string
                                        format: ''
                                        example: H3DW1MUWZyBkP5LG4rTYRH:3:CL:80:default
                                        description: Credential definition ID
                                      schemaId:
                                        type: string
                                        format: ''
                                        example: H3DW1MUWZyBkP5LG4rTYRH:2:Certificate Of Registration:6.0.0
                                        description: Schema ID
                          description: 'Data attributes contain specifications of exactly what is collected.

                            '
                        purpose:
                          type: string
                          description: Name of purpose
                        purposeDescription:
                          type: string
                          description: Description of purpose
                        lawfulBasis:
                          type: string
                          format: ''
                          example: ''
                          description: Lawful basis of the agreement - consent / legal_obligation / contract / vital_interest / public_task / legitimate_interest
                          enum:
                          - consent
                          - legal_obligation
                          - contract
                          - vital_interest
                          - public_task
                          - legitimate_interest
                        methodOfUse:
                          type: string
                          format: ''
                          example: ''
                          description: Method of use - null / data_source / data_using_service
                          enum:
                          - null
                          - data_source
                          - data_using_service
                        dpiaDate:
                          type: string
                          format: ''
                          example: ''
                          description: The date on which the DPIA report is generated after a DPIA
                        dpiaSummaryUrl:
                          type: string
                          description: The URl providing the DPIA result reports, summary etc that can be verified by any interested parties
                        signature:
                          $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/signature'
                          x-fk-model: Signature
                          description: 'Signature of authorising party of DataAgreement (Signatures may be chained in the case of multiple signatures)

                            '
                        active:
                          type: boolean
                          format: ''
                          example: ''
                          description: DataAgreement is active and new DataAgreementRecords can be created
                        forgettable:
                          type: boolean
                          format: ''
                          example: ''
                          description: DataAgreementRecord may be deleted when consent is withdrawn, as its existence is not necessary for auditability.
                        compatibleWithVersionId:
                          type: string
                          format: ''
                          x-fk-model: DataAgreement
                          description: 'WIP: This field indicates that Data Agreement Records may be transferred from this  compatible previous revision of the same DataAgreement

                            '
                        lifecycle:
                          type: string
                          description: 'WIP: Current Lifecycle state of the DataAgreement.  Lifecycle states are used to manage internal workflows and  should not be assigned semantic meanings for active Data Agreement Records.

                            '
                          enum:
                          - draft
                          - complete
                        dataUsingServices:
                          type: array
                          items:
                          - type: object
                            description: Data using service organisation for the data agreement
                            x-not-in-database: false
                            required:
                            - name
                            - sector
                            - location
                            properties:
                              name:
                                type: string
                                format: ''
                                example: ''
                                description: Name of the data using service organisation
                              sector:
                                type: string
                                format: ''
                                example: ''
                                description: Defines sector of the organisation
                              location:
                                type: string
                                format: ''
                                example: ''
                                description: Defines location of the organisation
                              privacyDashboardUrl:
                                type: string
                                format: ''
                                example: ''
                                description: Defines privacy dashboard url of the organisation
                        openApiSpecification:
                          type: object
                          description: This field contains OpenAPI specification document describing the API's endpoints, models, and operations.
                        dataSources:
                          type: array
                          items:
                          - type: object
                            description: Data source organisation for the data agreement
                            x-not-in-database: false
                            required:
                            - name
                            - sector
                            - location
                            properties:
                              name:
                                type: string
                                format: ''
                                example: ''
                                description: Name of the data source organisation
                              sector:
                                type: string
                                format: ''
                                example: ''
                                description: Defines sector of the organisation
                              location:
                                type: string
                                format: ''
                                example: ''
                                description: Defines location of the organisation
                              privacyDashboardUrl:
                                type: string
                                format: ''
                                example: ''
                                description: Defines privacy dashboard url of the organisation
                    type: array
                  pagination:
                    $ref: '#/paths/~1service~1individuals/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all active data agreements
      tags:
      - Data Agreement
  /service/data-agreement/{dataAgreementId}:
    get:
      description: This endpoint is used to read the data agreement defined by the organisation in consent building block.
      operationId: serviceAgreementRead
      parameters:
      - description: Unique ID of an object
        in: path
        name: dataAgreementId
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  properties:
                    dataAgreement:
                      $ref: '#/paths/~1service~1data-agreements/get/responses/200/content/application~1json/schema/properties/dataAgreements/items'
                    revision:
                      $ref: '#/paths/~1service~1policy~1%7BpolicyId%7D/get/responses/200/content/application~1json/schema/properties/revision'
                  type: object
                type: array
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read data agreement
      tags:
      - Data Agreement
  /service/data-agreement/{dataAgreementId}/data-attributes:
    get:
      description: This endpoint is used to read the data attributes defined in a particular data agreement revision.
      operationId: serviceAgreementDataRead
      parameters:
      - description: Unique ID of an object
        in: path
        name: dataAgreementId
        required: true
        schema:
          type: string
      - $ref: '#/paths/~1service~1individuals/get/parameters/0'
      - $ref: '#/paths/~1service~1individuals/get/parameters/1'
      - $ref: '#/paths/~1service~1data-agreements/get/parameters/0'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAttributes:
                    items:
                      type: object
                      description: Data attributes contain specifications of exactly what is collected.
                      x-not-in-database: false
                      required:
                      - name
                      - description
                      properties:
                        id:
                          type: string
                          format: ''
                          example: ''
                          description: Data attribute ID
                        name:
                          type: string
                          format: ''
                          example: ''
                          description: Name of the attribute, for instance "name" or "age"
                        description:
                          type: string
                          format: ''
                          example: ''
                          description: Description of the attribute
                        sensitivity:
                          type: boolean
                          format: ''
                          example: ''
                          description: Sensitivity of data attribute
                        category:
                          type: string
                          format: ''
                          example: ''
                          description: Category of data attribute
                        scope:
                          type: string
                          format: ''
                          example: ''
                          description: Scope required for data attribute
                    type: array
                  pagination:
                    $ref: '#/paths/~1service~1individuals/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List data attributes
      tags:
      - Data Agreement
  /service/policy/{policyId}:
    get:
      description: This endpoint is used to read latest version of data policy defined in the organisation in the consent building block.
      operationId: servicePolicyRead
      parameters:
      - description: Unique ID of an object
        in: path
        name: policyId
        required: true
        schema:
          type: string
      - $ref: '#/paths/~1service~1data-agreements/get/parameters/0'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  policy:
                    type: object
                    title: Policy
                    description: A policy governs data and DataAgreement in the realm of an organisation that is refered to as "data controller" (GDPR) and owner of referencing Agreements.
                    x-not-in-database: false
                    required:
                    - name
                    - url
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: ''
                      name:
                        type: string
                        format: ''
                        example: ''
                        description: Name of the policy
                      version:
                        type: string
                        format: ''
                        example: ''
                        description: Version of the policy (it can follow the semver format)
                      url:
                        type: string
                        format: ''
                        example: ''
                        description: Permanent URL at which this very version of the Policy can be read, should not be allowed to change over time
                      jurisdiction:
                        type: string
                        format: ''
                        example: ''
                        description: Jurisdiction
                      industrySector:
                        type: string
                        format: ''
                        example: ''
                        description: Industry sector
                      dataRetentionPeriodDays:
                        type: integer
                        format: ''
                        example: ''
                        description: Data retention period in days
                      geographicRestriction:
                        type: string
                        format: ''
                        example: ''
                        description: Geographic restriction
                      storageLocation:
                        type: string
                        format: ''
                        example: ''
                        description: Storage location
                      thirdPartyDataSharing:
                        type: boolean
                        format: ''
                        example: true
                        description: Third party data sharing
                  revision:
                    type: object
                    title: Revision
                    description: 'A *generic* revision model captures the serialised contents of any schema''s single row. This is then subject to 1) cryptographic signature and 2) auditing.


                      Aside from the "successor" column, a revision should be considered locked.'
                    x-not-in-database: false
                    required:
                    - id
                    - schemaName
                    - objectId
                    - objectData
                    - serizalizedSnapshot
                    - serializedHash
                    - timestamp
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: Revision ID
                      schemaName:
                        type: string
                        format: ''
                        example: ''
                        description: Previously "schema" but for technical reasons should be called "schemaName"
                        enum:
                        - dataAgreement
                        - policy
                        - dataAgreementRecord
                      objectId:
                        type: string
                        format: ''
                        example: ''
                        description: The PK of the object that was serialised
                      objectData:
                        type: string
                        format: ''
                        example: ''
                        description: The object that is serialised
                      signedWithoutObjectId:
                        type: boolean
                        format: ''
                        example: ''
                        description: Indicates that objectId was left blank in serizalizedSnapshot when calculating serializedHash. objectId may subsequently be filled in.
                      serizalizedSnapshot:
                        type: string
                        format: ''
                        example: ''
                        description: 'Revisioned data (sed as JSON) as a dict. Apply JSON Canonicalization Scheme as per IETF RFC 8785.  It contains all the fields of the schema except sucessorId, serializedHash, serializedSnapshot.

                          '
                      serializedHash:
                        type: string
                        format: ''
                        example: ''
                        description: Hash of serizalizedSnapshot (SHA-1)
                      timestamp:
                        type: string
                        format: ''
                        example: ''
                        description: Timestamp of when revisioning happened. It should be ISO 8601 UTC date time
                      authorizedByIndividualId:
                        description: Individual ID
                        type: string
                      authorizedByOtherId:
                        type: string
                        format: ''
                        example: ''
                        description: Reference to an admin user that has created this revision
                      successorId:
                        x-fk-model: Revision
                        type: string
                        description: If this revision is no longer the latest revision, refer to its successor
                      predecessorHash:
                        type: string
                        format: ''
                        example: ''
                        description: Tamper-resistent artifact from previous record, copied from serializedHash
                      predecessorSignature:
                        type: string
                        format: ''
                        example: ''
                        description: Tamper-resistent artifact from previous record (we don't know if the previous record was signed or not)
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read data policy
      tags:
      - Data Policy
      x-specification-crudl-model: Policy
      x-specification-pii-or-sensitive: 'False'
      x-specification-scenario: ''
      x-specification-usecase: UC-C-PIC-A-003
  /service/verification/data-agreements:
    get:
      description: This endpoint is used to list all data agreements available for an organisation defined in the consent building block. The results are paginated.
      operationId: serviceVerificationAgreementList
      parameters:
      - $ref: '#/paths/~1service~1individuals/get/parameters/0'
      - $ref: '#/paths/~1service~1individuals/get/parameters/1'
      - $ref: '#/paths/~1service~1data-agreements/get/parameters/0'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  dataAgreements:
                    items:
                      $ref: '#/paths/~1service~1data-agreements/get/responses/200/content/application~1json/schema/properties/dataAgreements/items'
                    type: array
                  pagination:
                    $ref: '#/paths/~1service~1individuals/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all data agreements
      tags:
      - Verification
  /service/verification/consent-record/{consentRecordId}:
    get:
      description: This endpoint is used to read the latest consent record for an organisation in the consent building block.
      operationId: serviceVerificationAgreementConsentRecordRead
      parameters:
      - description: Unique ID of an object
        in: path
        name: consentRecordId
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecord:
                    $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/consentRecord'
                  revision:
                    $ref: '#/paths/~1service~1policy~1%7BpolicyId%7D/get/responses/200/content/application~1json/schema/properties/revision'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read latest consent record
      tags:
      - Verification
      x-specification-crudl-model: ''
      x-specification-pii-or-sensitive: 'False'
      x-specification-scenario: '1.2'
      x-specification-usecase: UC-C-PIC-A-003
  /service/verification/consent-records:
    get:
      description: This endpoint is used to list all consent records available for an organisation defined in the consent building block. The results are paginated.
      operationId: serviceVerificationConsentRecordList
      parameters:
      - $ref: '#/paths/~1service~1individuals/get/parameters/0'
      - $ref: '#/paths/~1service~1individuals/get/parameters/1'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecords:
                    items:
                      $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/consentRecord'
                    type: array
                  pagination:
                    $ref: '#/paths/~1service~1individuals/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all consent records
      tags:
      - Verification
      x-specification-crudl-model: ''
      x-specification-pii-or-sensitive: 'True'
      x-specification-scenario: 3.1, 1.2
      x-specification-usecase: UC-C-PIC-A-003
  /service/individual/record/data-agreement/{dataAgreementId}:
    post:
      description: This endpoint is used to create a consent record when an individial records their consent (e.g. in the privacy dashboard) against a data agreement.
      operationId: serviceCreateIndividualConsentRecord
      parameters:
      - $ref: '#/paths/~1service~1data-agreement~1%7BdataAgreementId%7D~1data-attributes/get/parameters/0'
      - $ref: '#/paths/~1service~1data-agreements/get/parameters/0'
      - $ref: '#/paths/~1service~1individual~1record/delete/parameters/0'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecord:
                    $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/consentRecord'
                  revision:
                    $ref: '#/paths/~1service~1policy~1%7BpolicyId%7D/get/responses/200/content/application~1json/schema/properties/revision'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create consent record
      tags:
      - Consent Record
    get:
      description: This endpoint is used to read a consent record for an individial for a chosen data agreement. There should be one unambiguous consent record for an individual.
      operationId: serviceReadIndividualRecordRead
      parameters:
      - $ref: '#/paths/~1service~1data-agreement~1%7BdataAgreementId%7D~1data-attributes/get/parameters/0'
      - $ref: '#/paths/~1service~1individual~1record/delete/parameters/0'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecord:
                    $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/consentRecord'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read consent record
      tags:
      - Consent Record
  /service/individual/record/consent-record/draft:
    post:
      description: This endpoint is used to create a draft (unsaved) consent record and signature object (without a PKI) for a data agreement.
      operationId: serviceCreateIndividualConsentRecordDraft
      parameters:
      - description: An object with ID individualId
        in: query
        name: individualId
        required: true
        schema:
          type: string
      - description: An object with ID dataAgreementId
        in: query
        name: dataAgreementId
        required: true
        schema:
          type: string
      - description: An object with ID revisionId
        in: query
        name: revisionId
        required: false
        schema:
          type: string
      - $ref: '#/paths/~1service~1individual~1record/delete/parameters/0'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecord:
                    $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/consentRecord'
                  signature:
                    $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/signature'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create draft consent record
      tags:
      - Consent Record
  /service/individual/record/consent-record:
    post:
      description: This endpoint is used to create a consent record and signature object. This returns the same objects with the PK defined.
      operationId: serviceCreateIndividualConsentRecordAndSignature
      parameters:
      - $ref: '#/paths/~1service~1individual~1record/delete/parameters/0'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                consentRecord:
                  $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/consentRecord'
                  description: An object of type DataAgreementRecord
                signature:
                  $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/signature'
                  description: An object of type Signature
              required:
              - consentRecord
              - signature
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecord:
                    type: object
                    title: ConsentRecord
                    description: A consent record expresses consent (as defined in this building block's specification) to a single DataAgreement. There must be a UNIQUE constraint on (data agreement revision, individual)
                    x-not-in-database: false
                    required:
                    - id
                    - agreementRevisionHash
                    - state
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: Objects may be passed back by some API endpoints without an ID (PK), denoting that they are a "draft", i.e. a ConsentRecord that is not yet stored in the database and only exist in transit. Draft ConsentRecords do not have a Revision, but if paired up with a Signature, a valid Revision should be generated.
                      dataAgreementId:
                        type: string
                        x-fk-model: DataAgreement
                        description: The DataAgreement to which consent has been given
                      dataAgreementRevisionId:
                        type: string
                        x-fk-model: Revision
                        description: The Revision of the data agreement which consent has been given to
                      dataAgreementRevisionHash:
                        type: string
                        format: ''
                        example: ''
                        description: Copy of the revision hash. The hash is the included in the signature and ensures against tampering with the original agreement.
                      individualId:
                        type: string
                        x-fk-model: Individual
                        description: The Individual who has signed this consent record
                      optIn:
                        type: boolean
                        format: ''
                        example: ''
                        description: 'True: The individual has positively opted in. False: The individual has explicitly said no (or withdrawn a previous consent).'
                      state:
                        type: string
                        format: ''
                        example: ''
                        description: 'The state field is used to record state changes after-the-fact. It is maintained by the Consent BB itself. Valid states: unsigned/pending more signatures/signed'
                        enum:
                        - unsigned
                        - signed
                      signatureId:
                        type: string
                        x-fk-model: Signature
                        description: 'A signature that hashes all the values of the consent record and has signed it with the key of the Invidiual, making it verifiable and tamper-proof. TBD: Relation to a Signature schema?'
                      sectorPreferences:
                        type: array
                        items:
                          type: object
                          description: specifies the preferred sector details
                          x-not-in-database: false
                          required:
                          - sector
                          - location
                          properties:
                            sector:
                              type: string
                              format: ''
                              example: ''
                              description: Name of the sector
                            optIn:
                              type: boolean
                              description: Defines sector is opted in or not
                            isLastUpdated:
                              type: boolean
                              description: Defines consent record for this sector is last updated
                  revision:
                    $ref: '#/paths/~1service~1policy~1%7BpolicyId%7D/get/responses/200/content/application~1json/schema/properties/revision'
                  signature:
                    type: object
                    title: Signature
                    description: 'A generic signature contains a cryptographic hash of some value,  together with a signature created by some private key in another system.  Required signing methods: Revision object or another Signature object.

                      '
                    x-not-in-database: false
                    required:
                    - payload
                    - signature
                    - verificationMethod
                    - verificationPayload
                    - verificationPayloadHash
                    - verificationSignedBy
                    - timestamp
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: Objects may be passed back by some API endpoints without an id (PK), denoting that they are a "draft", i.e. a Signature that is not yet stored in the database and only exists in transit.
                      payload:
                        type: string
                        format: ''
                        example: ''
                        description: 'The final payload that is signed, constructed as a JSON serialisation of fields {verificationPayload: ..., verificationPayloadHash: ..., verificationMethod: ..., verificationArtifact: ..., verificationSignedBy: ..., verificationJwsHeader, timestamp: ..., signedWithoutObjectReference: ..., objectType: ..., objectReference: ...}. Serialised as a JSON dict. If the signature is generated before anything is stored in the database (and has a PK), then the objectReference should be omitted from the payload but filled in afterwards.'
                      signature:
                        type: string
                        format: ''
                        example: ''
                        description: Signature of payload hash, the format of the signature should be specified by either verificationMethod or verificationJwsHeader
                      verificationMethod:
                        type: string
                        format: ''
                        example: ''
                        description: 'A well-known string denoting which method is used. Valid values: TBD. This might be expanded with supported verification methods. There may be a minimal set of supported methods necessary.'
                      verificationPayload:
                        type: string
                        format: ''
                        example: ''
                        description: Internally generated serialised version of the data referenced by objectType and objectReference - by extracting and serialising their data as JSON
                      verificationPayloadHash:
                        type: string
                        format: ''
                        example: ''
                        description: Internally generated cryptographic hash of the value to be signed, i.e. the value of verificationPayload
                      verificationArtifact:
                        type: string
                        format: ''
                        example: ''
                        description: A verification artifact in the form of a scanned object, image, signature etc
                      verificationSignedBy:
                        type: string
                        format: ''
                        example: ''
                        description: Because an identifier's information may change over time, there is a need to store that information at the time of signing. In the case of a cryptographic signature, this field should contain some identifier for looking up or verifying the public key of the signing party. In the case of a non-cryptographic signature, this field could contain a natural individual's names, personal number, email addresses - store a snapshot that binds to the signature at the time of signing. In the case of a cryptographic signature, this may be the fingerprint of the individual's public key or in some cases, a token from the user's ID session.
                      verificationSignedAs:
                        type: string
                        format: ''
                        example: ''
                        description: 'DRAFT FIELD: Specifies the relationship between the authorising signature and the invidual which the payload concerns. This is relevant for Consent Records. Possible values: "individual" / "delegate".'
                      verificationJwsHeader:
                        type: string
                        format: ''
                        example: ''
                        description: Alternative to the verificationMethod, verificationHash and verificationSignature, give a JWS serialised object (RFC7515)
                      timestamp:
                        type: string
                        format: ''
                        example: ''
                        description: Timestamp of signature, currently this field isn't part of the payload so it's not tamper-proof
                      signedWithoutObjectReference:
                        type: boolean
                        format: ''
                        example: ''
                        description: Indicates that objectReference was left blank in the serialised version that was signed
                      objectType:
                        type: string
                        format: ''
                        example: ''
                        description: 'Name of the schema model that objectReference points to. Values: "signature" or "revision"'
                        enum:
                        - revision
                        - signature
                      objectReference:
                        type: string
                        format: ''
                        example: ''
                        description: A symmetric relation / back reference to the objectType that was signed. We are currently just modelling signing another signature (a chain) or signing a Revision (which can be a revision of a consent record, an agreement, policy etc).
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create consent record and signature
      tags:
      - Consent Record
      x-specification-crudl-model: ''
      x-specification-pii-or-sensitive: 'True'
      x-specification-scenario: '1.2'
      x-specification-usecase: UC-C-PIC-I-002
    get:
      description: This endpoint is used to list all consent records for an individual belonging to an organiation defined in the consent building block.
      operationId: serviceListIndividualConsentRecordList
      parameters:
      - $ref: '#/paths/~1service~1individuals/get/parameters/0'
      - $ref: '#/paths/~1service~1individuals/get/parameters/1'
      - $ref: '#/paths/~1service~1individual~1record/delete/parameters/0'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecords:
                    items:
                      $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/consentRecord'
                    type: array
                  pagination:
                    $ref: '#/paths/~1service~1individuals/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all consent records for individual
      tags:
      - Consent Record
      x-specification-crudl-model: ''
      x-specification-pii-or-sensitive: 'True'
      x-specification-scenario: ''
      x-specification-usecase: UC-C-PIC-I-001
  /service/individual/record:
    delete:
      description: This endpoint is used to delete all consent records for an individual belonging to an organiation defined in the consent building block. This could be used, for example to exercise digital rights (Right to be forgotten) and deletes all consent records that shall not be retained and have a "forgettable" data agreement. This may also delete an unsigned consent record, for instance in cases where the user exits the signing process.
      operationId: serviceDeleteAllRecords
      parameters:
      - in: header
        name: X-ConsentBB-IndividualId
        required: true
        schema:
          type: string
        description: Individual ID
      responses:
        '200':
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Delete all consent records
      tags:
      - Consent Record
  /service/individual/record/consent-record/{consentRecordId}:
    put:
      description: This endpoint is used to update an existing consent record for a given data agreement for an organiation defined in the consent building block. Note that updating a signed consent record invalidates its earlier signature.
      operationId: serviceUpdateIndividualConsentRecord
      parameters:
      - $ref: '#/paths/~1service~1verification~1consent-record~1%7BconsentRecordId%7D/get/parameters/0'
      - description: An object with ID individualId
        in: query
        name: individualId
        required: true
        schema:
          type: string
      - description: An object with ID dataAgreementId
        in: query
        name: dataAgreementId
        required: true
        schema:
          type: string
      - description: An object with ID revisionId
        in: query
        name: revisionId
        required: false
        schema:
          type: string
      - $ref: '#/paths/~1service~1individual~1record/delete/parameters/0'
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
              - type: object
                properties:
                  optIn:
                    description: 'True: The individual has positively opted in. False: The individual has explicitly said no (or withdrawn a previous consent).'
                    example: ''
                    format: ''
                    type: boolean
              - type: object
                properties:
                  sectorPreference:
                    type: object
                    properties:
                      sector:
                        type: string
                        format: ''
                        example: ''
                        description: Name of the sector
                      optIn:
                        type: boolean
                        description: Defines sector is opted in or not
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecord:
                    $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/consentRecord'
                  revision:
                    $ref: '#/paths/~1service~1policy~1%7BpolicyId%7D/get/responses/200/content/application~1json/schema/properties/revision'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update consent record
      tags:
      - Consent Record
  /service/individual/record/consent-record/{consentRecordId}/signature:
    post:
      description: This endpoint is used to create a blank signature object for the consent record for an individual in an organiation defined in the consent building block. Creates and returns a blank Signature object for the consent record.
      operationId: serviceCreateIndividualConsentRecordSignature
      parameters:
      - description: Unique ID of an object
        in: path
        name: consentRecordId
        required: true
        schema:
          type: string
      - $ref: '#/paths/~1service~1individual~1record/delete/parameters/0'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  signature:
                    $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/signature'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Creates blank signature
      tags:
      - Consent Record
    put:
      description: This endpoint is used to update a signature object for the consent record for an individual in an organiation defined in the consent building block.
      operationId: serviceUpdateIndividualConsentRecordSignature
      parameters:
      - description: Unique ID of an object
        in: path
        name: consentRecordId
        required: true
        schema:
          type: string
      - $ref: '#/paths/~1service~1individual~1record/delete/parameters/0'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                signature:
                  $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/signature'
                  description: An object of type Signature
              required:
              - signature
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  signature:
                    $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/signature'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update consent record signature
      tags:
      - Consent Record
  /service/individual/record/data-agreement/{dataAgreementId}/all:
    get:
      description: This endpoint is used to list all consent records existing for a data agreement for an organisation defined in the consent building block. The response is paginated.
      operationId: serviceListIndividualAgreementConsentRecordList
      parameters:
      - $ref: '#/paths/~1service~1data-agreement~1%7BdataAgreementId%7D~1data-attributes/get/parameters/0'
      - $ref: '#/paths/~1service~1individuals/get/parameters/0'
      - $ref: '#/paths/~1service~1individuals/get/parameters/1'
      - $ref: '#/paths/~1service~1individual~1record/delete/parameters/0'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecords:
                    items:
                      $ref: '#/paths/~1service~1individual~1record~1consent-record/post/responses/200/content/application~1json/schema/properties/consentRecord'
                    type: array
                  pagination:
                    $ref: '#/paths/~1service~1individuals/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all consent records
      tags:
      - Consent Record
  /service/individual/record/consent-record/history:
    get:
      deprecated: false
      description: This endpoint is used to list all consent record history existing for an individual in an organisation defined in the consent building block. The response is paginated.
      operationId: serviceListDataAgreementRecordHistory
      parameters:
      - $ref: '#/paths/~1service~1individuals/get/parameters/0'
      - $ref: '#/paths/~1service~1individuals/get/parameters/1'
      - $ref: '#/paths/~1service~1individual~1record/delete/parameters/0'
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentRecordHistory:
                    required:
                    - id
                    - organisationId
                    - dataAgreementId
                    - log
                    - timestamp
                    type: object
                    title: ConsentRecordHistory
                    properties:
                      id:
                        type: string
                        description: Data agreement record history ID
                      organisationId:
                        type: string
                        description: Organisation ID
                      dataAgreementId:
                        type: string
                        description: Data agreement ID
                      log:
                        type: string
                        description: Log string
                      timestamp:
                        type: string
                        description: Timestamp in ISO 8601 date time format
                    example:
                      id: 64e91591e2f6a8000142c665
                      organisationId: 603e683c69dd720001c74f93
                      dataAgreementId: 61e183127c81650001f97d43
                      log: Updated consent value to <Allow> for the purpose <Customer Loyalty Card Issuance> in organisation <The Retail Company (Germany)>
                      timestamp: '2023-08-25T20:56:49Z'
                  pagination:
                    $ref: '#/paths/~1service~1individuals/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List consent record history
      tags:
      - Consent Record
  /service/individual:
    post:
      description: This endpoint creates an individual for an organisation in the consent building block. This is used to onboard existing or new users.
      operationId: configCreatePolicy
      requestBody:
        content:
          application/json:
            schema:
              properties:
                individual:
                  allOf:
                  - type: object
                    title: Individual
                    description: Shallowly models an Individual which may reference some instance in an external system (registration system, functional ID, foundational ID etc). An Individual instance of this model is not to be mistaken with a unique natural individual. It is up to the system owner to decide if this record permits mapping to a natural individual and/or if a single Individual row can map to several consent agreements.
                    x-not-in-database: false
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: The unique ID of an Individual row.
                      externalId:
                        type: string
                        format: ''
                        example: ''
                        description: Reference to another foundational/functional ID, which is likely PII
                      externalIdType:
                        type: string
                        format: ''
                        example: ''
                        description: External ID type specifier. A string. For instance "email" or "foundational ID". Can be used in later queries.
                      identityProviderId:
                        type: string
                        format: ''
                        example: ''
                        description: This could be an FK, but for now we do not have a mapping of identity providers. IDBB may have more requirements.
                  - type: object
                    title: IndividualExtras
                    required:
                    - name
                    - email
                    - phone
                    properties:
                      name:
                        type: string
                        description: Name of the individual
                      iamId:
                        type: string
                        description: Create a user in keycloak and save the `id` as `iamId`
                      email:
                        type: string
                        description: Email ID
                      phone:
                        type: string
                        description: Phone
                      pushNotificationToken:
                        type: string
                        description: Device token of the individual
                      deviceType:
                        type: string
                        description: Device type(OS) of the individual
                        enum:
                        - android
                        - ios
                      mapperId:
                        type: string
                        description: Defines the mapper id of the individual
                  description: An object of type Individual
              required:
              - individual
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  individual:
                    allOf:
                    - $ref: '#/paths/~1service~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/0'
                    - $ref: '#/paths/~1service~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/1'
                    description: An object of type Individual
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create individual
      tags:
      - Individual
  /service/individual/{individualId}:
    get:
      description: This endpoint is used to read the individual's information as defined by the organisation in the consent building block. This is used in privacy dashboard where the individuals can mark their consents, sign data agreement etc.
      operationId: configReadIndividual
      parameters:
      - description: Unique ID of an object
        in: path
        name: individualId
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  individual:
                    allOf:
                    - $ref: '#/paths/~1service~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/0'
                    - $ref: '#/paths/~1service~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/1'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read individual
      tags:
      - Individual
    put:
      description: This endpoint is used to udpated an individual for an organisation defined in the consent building block.
      operationId: configUpdateIndividual
      parameters:
      - description: Unique ID of an object
        in: path
        name: individualId
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                individual:
                  allOf:
                  - $ref: '#/paths/~1service~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/0'
                  - $ref: '#/paths/~1service~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/1'
                  description: An object of type Individual
              required:
              - individual
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  individual:
                    allOf:
                    - $ref: '#/paths/~1service~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/0'
                    - $ref: '#/paths/~1service~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/1'
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update individual
      tags:
      - Individual
  /service/individuals:
    get:
      description: lists individuals in the system This endpoint is used to list all individuals in the organisation defined in the consent building block.
      operationId: serviceListIndividuals
      parameters:
      - description: Requested index for start of resources to be provided in response requested by client
        in: query
        name: offset
        required: false
        schema:
          type: integer
      - name: limit
        in: query
        description: Number of items returned per page. Requested number of resources to be provided in response requested by client.
        required: false
        schema:
          type: integer
          default: 10
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  individuals:
                    items:
                      allOf:
                      - $ref: '#/paths/~1service~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/0'
                      - $ref: '#/paths/~1service~1individual/post/requestBody/content/application~1json/schema/properties/individual/allOf/1'
                    type: array
                  pagination:
                    type: object
                    title: Pagination
                    properties:
                      currentPage:
                        type: integer
                        description: Current page number
                      totalItems:
                        type: integer
                        description: Total number of items available
                      totalPages:
                        type: integer
                        description: Total number of pages based on limit
                      limit:
                        type: integer
                        description: Number of items per page
                      hasPrevious:
                        type: boolean
                        description: Indicates if there's a previous page
                      hasNext:
                        type: boolean
                        description: Indicates if there's a next page
                type: object
          description: ''
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all individuals
      tags:
      - Individual
  /service/data-sharing:
    get:
      description: This endpoint is used to render the data sharing UI during a data exchange as defined by a (data source) organisation in the consent building block.
      operationId: serviceReadDataSharingUi
      parameters:
      - description: ID for data agreement
        in: query
        name: dataAgreementId
        required: true
        schema:
          type: string
      - description: Access token for authentication
        in: query
        name: accessToken
        required: false
        schema:
          type: string
      - description: API key for authorisation
        in: query
        name: apiKey
        required: false
        schema:
          type: string
      - description: ID for the individual
        in: query
        name: individualId
        required: false
        schema:
          type: string
      - description: Name of the third-party organisation
        in: query
        name: thirdPartyOrgName
        required: true
        schema:
          type: string
      - description: URL for the third-party organisation's logo image
        in: query
        name: thirdPartyOrgLogoImageUrl
        required: false
        schema:
          type: string
      - description: Redirect URL for data sharing UI
        in: query
        name: dataSharingUiRedirectUrl
        required: true
        schema:
          type: string
      - description: Authorization Code
        in: query
        name: code
        required: false
        schema:
          type: string
      - description: Redirect URL for authorisation
        in: query
        name: authorisationRedirectUrl
        required: false
        schema:
          type: string
      responses:
        '200':
          description: Ok
          headers: {}
        '400':
          description: bad input parameter
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read data sharing UI
      tags:
      - Data Sharing
  /v3/service/data-space/{organisationId}/.well-known/access-point-configuration:
    get:
      description: The Access Point Configuration Metadata endpoint for an organisation's capabilities in regards to a Data Marketplace.
      parameters:
      - description: The ID of the organisation
        in: path
        name: organisationId
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Get Access Point Configurations Metadata
          content:
            application/json:
              schema:
                properties:
                  access_point_endpoint:
                    type: string
                    description: Access Point Configuration endpoint URL
                  authorization_server:
                    type: string
                    description: OAuth Authorization Server URL for the organisation
                  get_verification_request_endpoint:
                    type: string
                    description: Get Verification Request endpoint URL for the organisation, where a verification request can be initiated
                  post_verification_request_endpoint:
                    type: string
                    description: Post Verification Request endpoint URL for the organisation, where a verification request can be received
                type: object
                reqiured:
                - access_point_endpoint
                - authorization_server
                - get_verification_request_endpoint
                - post_verification_request_endpoint
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      summary: Access Point Configurations
      tags:
      - Authorisation Server
  /v3/service/data-space/{organisationId}/.well-known/oauth-authorization-server:
    get:
      description: The Authorisation Server Metadata endpoint for an organisation's capabilities in regards to a Data Marketplace.
      parameters:
      - $ref: '#/paths/~1v3~1service~1data-space~1%7BorganisationId%7D~1.well-known~1access-point-configuration/get/parameters/0'
      responses:
        '200':
          description: Get Authorisation Server Metadata
          content:
            application/json:
              schema:
                properties:
                  issuer:
                    type: string
                    description: Issuer Identifier for the OAuth Authorization Server
                  token_endpoint:
                    type: string
                    description: Token endpoint URL for the OAuth Authorization Server
                  registration_endpoint:
                    type: string
                    description: Registration endpoint URL for the OAuth Authorization Server
                  validate_token_endpoint:
                    type: string
                    description: Where an Access Token from a Pull-Data request can be verified and authorised
                type: object
                reqiured:
                - issuer
                - token_endpoint
                - registration_endpoint
                - validate_token_endpoint
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      summary: Authorisation Server Metadata
      tags:
      - Authorisation Server
  /v3/service/data-space/validate-access:
    post:
      description: 'The Token Verification and Authorisation endpoint for an organisation in  regards to a Data Marketplace. An Access Token issued as a result of a Pull-Data request can be verified here, and an authorisation decision can be made  against the requested resource (defined by OpenAPI method and path). The  resource is checked against the OpenAPI specification of the underlying  Data Agreement within the Data Disclosure Agreement Record''s Template  connected to the Access Token.

        '
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                accessToken:
                  type: string
                  description: The JWT Access Token to be verified and authorised
                httpMethod:
                  type: string
                  description: The HTTP Method to be checked against the OpenAPI specification
                path:
                  type: string
                  description: The path to be checked against the OpenAPI specification
                excludeDataClassification:
                  type: bool
                  description: Whether to exclude the data classification from the result
                  default: false
                excludeIndividuals:
                  type: bool
                  description: Whether to exclude the individuals from the result
                  default: false
                excludeDecodedClaims:
                  type: bool
                  description: Whether to exclude the decoded claims from the result
                  default: false
              required:
              - accessToken
              - httpMethod
              - path
      responses:
        '200':
          description: Access token verification result
          content:
            application/json:
              schema:
                oneOf:
                - properties:
                    verified:
                      type: boolean
                      description: Whether the access token was verified and authorised
                      example: true
                    dataClassification:
                      type: string
                      description: The data classification of the requested resource
                      enum:
                      - anonymous
                      - pii
                    individuals:
                      type: array
                      items:
                        allOf:
                        - $ref: '#/paths/~1v3~1service~1data-disclosure-agreement~1record~1%7BdataDisclosureAgreementRecordId%7D~1individual~1%7BindividualId%7D/get/responses/200/content/application~1json/schema/properties/individual/allOf/0'
                        - $ref: '#/paths/~1v3~1service~1data-disclosure-agreement~1record~1%7BdataDisclosureAgreementRecordId%7D~1individual~1%7BindividualId%7D/get/responses/200/content/application~1json/schema/properties/individual/allOf/1'
                        description: Data for an individual, returned if the Pull-Data request was made for a specific individual
                    decodedClaims:
                      type: object
                      description: The decoded JWT claims. The fields listed below will be present; additional claims are allowed.
                      properties:
                        aud:
                          type: string
                          description: The audience of the JWT
                        dataClassification:
                          type: string
                          enum:
                          - anonymous
                          - pii
                          description: The data classification of the requested resource
                        dataDisclosureAgreementRecordId:
                          type: string
                          description: The ID of the Data Disclosure Agreement Record associated with this token
                        exp:
                          type: integer
                          description: The expiration time of the JWT
                        iat:
                          type: integer
                          description: The issued at time of the JWT
                        iss:
                          type: string
                          description: The issuer of the JWT
                        jti:
                          type: string
                          description: The unique identifier for the JWT
                      required:
                      - aud
                      - dataClassification
                      - dataDisclosureAgreementRecordId
                      - exp
                      - iat
                      - iss
                      - jti
                      additionalProperties: true
                  type: object
                  required:
                  - verified
                  - dataClassification
                  - individuals
                  - decodedClaims
                - properties:
                    verified:
                      type: boolean
                      description: Whether the access token was verified and authorised
                      example: false
                    reason:
                      type: string
                      description: The reason why the access token verification failed
                      example: Invalid signature
                  type: object
                  required:
                  - verified
                  - reason
        headers:
          Content-Type:
            schema:
              type: string
              example: application/json
            description: Content-Type header
      security:
      - ApiKey: []
      summary: Token Verification and Authorisation
      tags:
      - Authorisation Server
  /v3/service/data-disclosure-agreement/records:
    get:
      description: 'Lists all Data Disclosure Agreement Records for the organisation, depending on  the role of the organisation for the record, "data_source" or  "data_using_service".

        '
      parameters:
      - description: Requested index for start of resources to be provided in response requested by client
        in: query
        name: offset
        required: false
        schema:
          type: integer
      - name: limit
        in: query
        description: Number of items returned per page. Requested number of resources to be provided in response requested by client.
        required: false
        schema:
          type: integer
          default: 10
      - name: organisationRole
        in: query
        description: Filter by Organisation Role for the Data Disclosure Record, "data_source" or "data_using_service"
        required: true
        schema:
          type: string
      - name: signStatus
        in: query
        description: Filter by whether the status of the Data Disclosure Record is "sign" or "unsign" (e.g. active or inactive)
        required: false
        schema:
          type: string
      responses:
        '200':
          description: Data Disclosure Agreement Record List
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementRecords:
                    type: array
                    items:
                      type: object
                      description: 'A record represents an Agreement between a Data Source and Data Using Service  that can be signed by both, based on the updated Go structure. The Opt-In value determines whether the record is active and data can be shared to the Data Using Service. The Opt-In value is only valid for records containing both signatures.

                        '
                      required:
                      - id
                      - canonicalId
                      - dataDisclosureAgreementTemplateRevision
                      - dataSourceSignature
                      - dataUsingServiceSignature
                      - optIn
                      - timestamp
                      - organisationId
                      - organisationRole
                      - isDeleted
                      properties:
                        id:
                          type: string
                          description: Unique Data Disclosure Agreement Record identifier.
                        canonicalId:
                          type: string
                          description: The cross-organisational identifier for the record.
                        dataDisclosureAgreementTemplateRevision:
                          description: The full revision object of the Data Disclosure Agreement Template which the record is based on.
                          type: object
                          title: Revision
                          x-not-in-database: false
                          required:
                          - id
                          - schemaName
                          - objectId
                          - objectData
                          - serizalizedSnapshot
                          - serializedHash
                          - timestamp
                          properties:
                            id:
                              type: string
                              format: ''
                              example: ''
                              description: Revision ID
                            schemaName:
                              type: string
                              format: ''
                              example: ''
                              description: Previously "schema" but for technical reasons should be called "schemaName"
                              enum:
                              - dataAgreement
                              - policy
                              - dataAgreementRecord
                            objectId:
                              type: string
                              format: ''
                              example: ''
                              description: The PK of the object that was serialised
                            objectData:
                              type: string
                              format: ''
                              example: ''
                              description: The object that is serialised
                            signedWithoutObjectId:
                              type: boolean
                              format: ''
                              example: ''
                              description: Indicates that objectId was left blank in serizalizedSnapshot when calculating serializedHash. objectId may subsequently be filled in.
                            serizalizedSnapshot:
                              type: string
                              format: ''
                              example: ''
                              description: 'Revisioned data (sed as JSON) as a dict. Apply JSON Canonicalization Scheme as per IETF RFC 8785.  It contains all the fields of the schema except sucessorId, serializedHash, serializedSnapshot.

                                '
                            serializedHash:
                              type: string
                              format: ''
                              example: ''
                              description: Hash of serizalizedSnapshot (SHA-1)
                            timestamp:
                              type: string
                              format: ''
                              example: ''
                              description: Timestamp of when revisioning happened. It should be ISO 8601 UTC date time
                            authorizedByIndividualId:
                              description: Individual ID
                              type: string
                            authorizedByOtherId:
                              type: string
                              format: ''
                              example: ''
                              description: Reference to an admin user that has created this revision
                            successorId:
                              x-fk-model: Revision
                              type: string
                              description: If this revision is no longer the latest revision, refer to its successor
                            predecessorHash:
                              type: string
                              format: ''
                              example: ''
                              description: Tamper-resistent artifact from previous record, copied from serializedHash
                            predecessorSignature:
                              type: string
                              format: ''
                              example: ''
                              description: Tamper-resistent artifact from previous record (we don't know if the previous record was signed or not)
                        dataSourceSignature:
                          description: The signature provided by the Data Source.
                          type: object
                          title: Signature
                          x-not-in-database: false
                          required:
                          - id
                          - payload
                          - signature
                          - signatureDecoded
                          - verificationMethod
                          - verificationPayload
                          - verificationPayloadHash
                          - verificationSignedBy
                          - verificationSignedAs
                          - verificationJwsHeader
                          - timestamp
                          - signedWithoutObjectReference
                          - objectType
                          - objectReference
                          properties:
                            id:
                              type: string
                              description: Unique signature identifier
                            payload:
                              type: string
                              description: The Data Disclosure Agreement Record (as a stringified JSON object)
                            signature:
                              type: string
                              description: JWT signature
                            signatureDecoded:
                              type: object
                              description: Decoded signature, containing claims used from the signature JWT
                            verificationMethod:
                              type: string
                              description: 'A well-known string denoting which method is used. Valid values: ''keybinding_jwt'''
                            verificationPayload:
                              type: string
                              description: The keybinding JWT payload that was signed to produce the signature
                            verificationPayloadHash:
                              type: string
                              description: Internally generated cryptographic hash of the value to be signed, i.e. the value of verificationPayload
                            verificationSignedBy:
                              type: string
                              description: Because an identifier's information may change over time, there is a need to store that information at the time of signing. In the case of a cryptographic signature, this field should contain some identifier for looking up or verifying the public key of the signing party.
                            verificationSignedAs:
                              type: string
                              description: Either signed as a "data_source" or as a "data_using_service"
                              enum:
                              - data_source
                              - data_using_service
                            verificationJwsHeader:
                              type: string
                              description: Alternative to the verificationMethod, verificationHash and verificationSignature, give a JWS serialised object (RFC7515)
                            timestamp:
                              type: string
                              description: Timestamp of signature
                            signedWithoutObjectReference:
                              type: boolean
                              description: Indicates that objectReference was left blank in the serialised version that was signed, always false for Data Disclosure Agreement Record signatures
                            objectType:
                              type: string
                              description: Name of the schema model that objectReference points to, in this case "data_disclosure_agreement_record"
                              enum:
                              - data_disclosure_agreement_record
                            objectReference:
                              type: string
                              description: In the case of a data_disclosure_agreement_record, this is the ID of the record that was signed
                        dataUsingServiceSignature:
                          description: The signature provided by the Data Using Service.
                          $ref: '#/paths/~1v3~1service~1data-disclosure-agreement~1records/get/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementRecords/items/properties/dataSourceSignature'
                        optIn:
                          type: boolean
                          description: Whether the record is active and data can be shared to the Data Using Service.
                        timestamp:
                          type: string
                          description: The timestamp of when the latest signature was added.
                        organisationId:
                          type: string
                          description: The ID of the organisation this record belongs to (both organisation keep a copy).
                        organisationRole:
                          type: string
                          description: The role of the organisation in this agreement (e.g., data_source).
                          enum:
                          - data_source
                          - data_using_service
                        isDeleted:
                          type: boolean
                          description: If the record is deleted.
                  pagination:
                    type: object
                    title: Pagination
                    properties:
                      currentPage:
                        type: integer
                        description: Current page number
                      totalItems:
                        type: integer
                        description: Total number of items available
                      totalPages:
                        type: integer
                        description: Total number of pages based on limit
                      limit:
                        type: integer
                        description: Number of items per page
                      hasPrevious:
                        type: boolean
                        description: Indicates if there's a previous page
                      hasNext:
                        type: boolean
                        description: Indicates if there's a next page
                type: object
                required:
                - dataDisclosureAgreementRecords
                - pagination
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - ApiKey: []
      summary: List all Data Disclosure Agreement Records
      tags:
      - Data Disclosure Agreements
  /v3/service/data-space/pull-data:
    post:
      description: 'The Pull Data endpoint allows a Data Using Service to Pull Data according to a  specific Data Disclosure Agreement record signed by themselves and a Data  Source, either anonymously or for a specific individual.

        '
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                dataDisclosureAgreementRecordId:
                  type: string
                  description: Data Disclosure Agreement Record ID
                individualId:
                  type: string
                  description: Individual ID
              required:
              - dataDisclosureAgreementRecordId
      responses:
        '200':
          description: Successful Access Token release
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                    description: Access token to be used at Resource Server
      security:
      - ApiKey: []
      summary: Pull Data Endpoint
      tags:
      - Signed Agreements
  /v3/service/data-disclosure-agreement/record/{dataDisclosureAgreementRecordId}/individuals:
    get:
      description: 'Lists individuals that have opted-in to the underlying Data Agreement within the specified Data Disclosure Agreement Record.

        '
      parameters:
      - name: dataDisclosureAgreementRecordId
        in: path
        description: Unique ID of a Data Disclosure Record
        required: true
        schema:
          type: string
      responses:
        '200':
          description: List of Opted-In Individuals
          content:
            application/json:
              schema:
                properties:
                  individuals:
                    type: array
                    items:
                      allOf:
                      - $ref: '#/paths/~1v3~1service~1data-disclosure-agreement~1record~1%7BdataDisclosureAgreementRecordId%7D~1individual~1%7BindividualId%7D/get/responses/200/content/application~1json/schema/properties/individual/allOf/0'
                      - $ref: '#/paths/~1v3~1service~1data-disclosure-agreement~1record~1%7BdataDisclosureAgreementRecordId%7D~1individual~1%7BindividualId%7D/get/responses/200/content/application~1json/schema/properties/individual/allOf/1'
                      description: Data for an individual who has opted-in to the Data Agreement
                type: object
                required:
                - individuals
      security:
      - ApiKey: []
      summary: List Opted-In Individuals
      tags:
      - Data Disclosure Agreements
  /v3/service/data-disclosure-agreement/record/{dataDisclosureAgreementRecordId}/individual/{individualId}:
    get:
      description: 'Checks whether the individual is opted-in to the underlying  Data Agreement within the specified Data Disclosure Agreement Record.

        '
      parameters:
      - $ref: '#/paths/~1v3~1service~1data-disclosure-agreement~1record~1%7BdataDisclosureAgreementRecordId%7D~1individuals/get/parameters/0'
      - description: Unique ID of an object
        in: path
        name: individualId
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Check if an Individual is Opted-In to Data Agreement
          content:
            application/json:
              schema:
                properties:
                  optIn:
                    type: boolean
                    description: Indicates if the individual is opted-in to the Data Agreement
                  individual:
                    allOf:
                    - type: object
                      title: Individual
                      description: Shallowly models an Individual which may reference some instance in an external system (registration system, functional ID, foundational ID etc). An Individual instance of this model is not to be mistaken with a unique natural individual. It is up to the system owner to decide if this record permits mapping to a natural individual and/or if a single Individual row can map to several consent agreements.
                      x-not-in-database: false
                      properties:
                        id:
                          type: string
                          format: ''
                          example: ''
                          description: The unique ID of an Individual row.
                        externalId:
                          type: string
                          format: ''
                          example: ''
                          description: Reference to another foundational/functional ID, which is likely PII
                        externalIdType:
                          type: string
                          format: ''
                          example: ''
                          description: External ID type specifier. A string. For instance "email" or "foundational ID". Can be used in later queries.
                        identityProviderId:
                          type: string
                          format: ''
                          example: ''
                          description: This could be an FK, but for now we do not have a mapping of identity providers. IDBB may have more requirements.
                    - type: object
                      title: IndividualExtras
                      required:
                      - name
                      - email
                      - phone
                      properties:
                        name:
                          type: string
                          description: Name of the individual
                        iamId:
                          type: string
                          description: Create a user in keycloak and save the `id` as `iamId`
                        email:
                          type: string
                          description: Email ID
                        phone:
                          type: string
                          description: Phone
                        pushNotificationToken:
                          type: string
                          description: Device token of the individual
                        deviceType:
                          type: string
                          description: Device type(OS) of the individual
                          enum:
                          - android
                          - ios
                        mapperId:
                          type: string
                          description: Defines the mapper id of the individual
                    description: Data for an individual who has opted-in to the Data Agreement
                type: object
      security:
      - ApiKey: []
      summary: Get Individual is Opted-In
      tags:
      - Data Disclosure Agreements
  /v3/config/data-disclosure-agreement:
    post:
      description: Creates a Data Disclosure Agreement Template.
      requestBody:
        content:
          application/json:
            schema:
              properties:
                dataDisclosureAgreementTemplate:
                  description: Required fields to create a Data Disclosure Agreement Template
                  type: object
                  title: DataDisclosureAgreementTemplate
                  required:
                  - language
                  - dataController
                  - agreementPeriod
                  - dataSharingRestrictions
                  - codeOfConduct
                  - dataAgreementId
                  - dataAgreementRevisionId
                  - dataAgreementRevisionHash
                  - presentationDefinitionId
                  - active
                  properties:
                    language:
                      type: string
                      description: ISO 639-1 language code (e.g. 'en' or 'sv')
                      example: en
                    dataController:
                      $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate/properties/dataController'
                      type: object
                    agreementPeriod:
                      type: integer
                      minimum: 1
                      description: Days for which the agreement is valid
                      example: 365
                    dataSharingRestrictions:
                      $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate/properties/dataSharingRestrictions'
                      type: object
                    purpose:
                      type: string
                      maxLength: 100
                      description: Required if active=true, unless present already from the draft version
                    purposeDescription:
                      type: string
                      maxLength: 500
                      description: Required if active=true, unless present already from the draft version
                    lawfulBasis:
                      type: string
                      enum:
                      - contract
                      description: Required if active=true, unless present already from the draft version
                    codeOfConduct:
                      type: string
                      format: uri
                      description: URL to code of conduct
                    dataAgreementId:
                      type: string
                      description: ID of the connected Data Agreement
                    dataAgreementRevisionId:
                      type: string
                      description: ID of the connected Data Agreement Revision
                    dataAgreementRevisionHash:
                      type: string
                      description: Hash of the connected Data Agreement Revision
                    presentationDefinitionId:
                      type: string
                      description: ID of the connected Presentation Definition
                    active:
                      type: boolean
                      description: Publish immediately if true
              required:
              - dataDisclosureAgreementTemplate
              type: object
      responses:
        '200':
          description: Data Disclosure Agreement Template created
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementTemplate:
                    type: object
                    description: 'A template outlines an agreement between a Data Source and  Data Using Service that can be signed by both.

                      '
                    required:
                    - context
                    - id
                    - type
                    - language
                    - version
                    - templateId
                    - templateVersion
                    - dataController
                    - agreementPeriod
                    - dataSharingRestrictions
                    - purpose
                    - purposeDescription
                    - lawfulBasis
                    - dataAttributes
                    - codeOfConduct
                    - dataAgreementId
                    - dataAgreementRevisionId
                    - dataAgreementRevisionHash
                    - presentationDefinitionId
                    - active
                    properties:
                      context:
                        type: array
                        items:
                          type: string
                        description: Array of URIs of JSON-LD contexts
                      id:
                        type: string
                        description: Unique Data Disclosure Agreement Template identifier
                      type:
                        type: array
                        items:
                          type: string
                        example:
                        - DataDisclosureAgreement
                        description: The Data Disclosure Agreement type from context
                      language:
                        type: string
                        description: ISO 639-1 language code (e.g. 'en' or 'sv')
                      version:
                        type: string
                        description: The version of this Data Disclosure Agreement Template
                      templateId:
                        type: string
                        description: Unique Data Disclosure Agreement Template identifier (derived from 'id')
                      templateVersion:
                        type: string
                        description: The version of this Data Disclosure Agreement Template (derived from 'version')
                      dataController:
                        type: object
                        description: An organisation constituted as a legally defined entity in any jurisdiction
                        required:
                        - did
                        - name
                        - legalId
                        - url
                        - industrySector
                        properties:
                          publicKey:
                            type: string
                            description: Data controller public key
                          name:
                            type: string
                            maxLength: 50
                            description: Data controller name
                          legalId:
                            type: string
                            description: Data controller legal identifier
                          url:
                            type: string
                            format: uri
                            description: Data controller URL
                          industrySector:
                            type: string
                            maxLength: 50
                            description: Data controller industry sector
                      agreementPeriod:
                        type: integer
                        description: Days for which agreement is valid
                      dataSharingRestrictions:
                        type: object
                        description: 'Restrictions on how the data is shared. OBS! Object should be ''dataSharingRestrictions''

                          '
                        required:
                        - policyUrl
                        - jurisdiction
                        - dataRetentionPeriod
                        - geographicRestriction
                        - storageLocation
                        properties:
                          policyUrl:
                            type: string
                            format: uri
                            description: Where to find the policy
                          jurisdiction:
                            type: string
                            description: Jurisdiction where the data sharing restrictions apply
                          dataRetentionPeriod:
                            type: integer
                            minimum: 1
                            description: How many days the data can be kept
                          geographicRestriction:
                            type: string
                            description: Where the data can be shared to
                          storageLocation:
                            type: string
                            description: Where the data is stored
                      purpose:
                        type: string
                        description: Purpose of the Data Disclosure Agreement
                      purposeDescription:
                        type: string
                        description: Description of the Data Disclosure Agreement
                      lawfulBasis:
                        type: string
                        enum:
                        - contract
                        description: Lawful basis for the Data Disclosure Agreement
                      dataAttributes:
                        type: array
                        items:
                          type: object
                          description: Data attributes contain specifications of exactly what is collected.
                          x-not-in-database: false
                          required:
                          - name
                          - description
                          properties:
                            id:
                              type: string
                              format: ''
                              example: ''
                              description: Data attribute ID
                            name:
                              type: string
                              format: ''
                              example: ''
                              description: Name of the attribute, for instance "name" or "age"
                            description:
                              type: string
                              format: ''
                              example: ''
                              description: Description of the attribute
                            sensitivity:
                              type: boolean
                              format: ''
                              example: ''
                              description: Sensitivity of data attribute
                            category:
                              type: string
                              format: ''
                              example: ''
                              description: Category of data attribute
                            scope:
                              type: string
                              format: ''
                              example: ''
                              description: Scope required for data attribute
                      codeOfConduct:
                        type: string
                        description: URL to code of conduct
                      dataAgreementId:
                        type: string
                        description: ID of the connected Data Agreement
                      dataAgreementRevisionId:
                        type: string
                        description: ID of the connected Data Agreement Revision
                      dataAgreementRevisionHash:
                        type: string
                        description: Hash of the connected Data Agreement Revision
                      active:
                        type: boolean
                        description: Whether the Data Disclosure Agreement is published or not
                      presentationDefinitionId:
                        type: string
                        description: ID of the connected Presentation Definition
                      openApiSpecification:
                        type: object
                        description: OpenAPI specification of the Data Agreement, defining available APIs for Data Using Services
                  revision:
                    type: object
                    title: Revision
                    description: 'A *generic* revision model captures the serialised contents of any schema''s single row. This is then subject to 1) cryptographic signature and 2) auditing.


                      Aside from the "successor" column, a revision should be considered locked.'
                    x-not-in-database: false
                    required:
                    - id
                    - schemaName
                    - objectId
                    - objectData
                    - serizalizedSnapshot
                    - serializedHash
                    - timestamp
                    properties:
                      id:
                        type: string
                        format: ''
                        example: ''
                        description: Revision ID
                      schemaName:
                        type: string
                        format: ''
                        example: ''
                        description: Previously "schema" but for technical reasons should be called "schemaName"
                        enum:
                        - dataAgreement
                        - policy
                        - dataAgreementRecord
                      objectId:
                        type: string
                        format: ''
                        example: ''
                        description: The PK of the object that was serialised
                      objectData:
                        type: string
                        format: ''
                        example: ''
                        description: The object that is serialised
                      signedWithoutObjectId:
                        type: boolean
                        format: ''
                        example: ''
                        description: Indicates that objectId was left blank in serizalizedSnapshot when calculating serializedHash. objectId may subsequently be filled in.
                      serizalizedSnapshot:
                        type: string
                        format: ''
                        example: ''
                        description: 'Revisioned data (sed as JSON) as a dict. Apply JSON Canonicalization Scheme as per IETF RFC 8785.  It contains all the fields of the schema except sucessorId, serializedHash, serializedSnapshot.

                          '
                      serializedHash:
                        type: string
                        format: ''
                        example: ''
                        description: Hash of serizalizedSnapshot (SHA-1)
                      timestamp:
                        type: string
                        format: ''
                        example: ''
                        description: Timestamp of when revisioning happened. It should be ISO 8601 UTC date time
                      authorizedByIndividualId:
                        description: Individual ID
                        type: string
                      authorizedByOtherId:
                        type: string
                        format: ''
                        example: ''
                        description: Reference to an admin user that has created this revision
                      successorId:
                        x-fk-model: Revision
                        type: string
                        description: If this revision is no longer the latest revision, refer to its successor
                      predecessorHash:
                        type: string
                        format: ''
                        example: ''
                        description: Tamper-resistent artifact from previous record, copied from serializedHash
                      predecessorSignature:
                        type: string
                        format: ''
                        example: ''
                        description: Tamper-resistent artifact from previous record (we don't know if the previous record was signed or not)
                type: object
                required:
                - dataDisclosureAgreementTemplate
                - revision
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create Data Disclosure Agreement Template
      tags:
      - Data Disclosure Agreements
  /v3/config/data-disclosure-agreement/{dataDisclosureAgreementTemplateId}:
    get:
      description: Reads a Data Disclosure Agreement Template.
      parameters:
      - name: dataDisclosureAgreementTemplateId
        in: path
        description: Unique ID of a Data Disclosure Template
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Data Disclosure Agreement Template Read
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementTemplate:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate'
                  revision:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                type: object
                required:
                - dataDisclosureAgreementTemplate
                - revision
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read Data Disclosure Agreement Template
      tags:
      - Data Disclosure Agreements
    put:
      description: 'Updates a Data Disclosure Agreement Template. Partial updates are supported.  If publishing (set active=true), purpose,  purpose description, and lawful basis must either be provided or already be present from the draft version.  If changing the Data Agreement, all three fields must be provided (ID,  revision ID, and revision hash).

        '
      parameters:
      - $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateId%7D/get/parameters/0'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                dataDisclosureAgreementTemplate:
                  description: Fields which can be updated in a Data Disclosure Agreement Template
                  type: object
                  title: DataDisclosureAgreementTemplate
                  properties:
                    language:
                      type: string
                      description: ISO 639-1 language code (e.g. 'en' or 'sv')
                      example: en
                    dataController:
                      $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate/properties/dataController'
                      type: object
                    agreementPeriod:
                      type: integer
                      minimum: 1
                      description: Days for which the agreement is valid
                      example: 365
                    dataSharingRestrictions:
                      $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate/properties/dataSharingRestrictions'
                      type: object
                    purpose:
                      type: string
                      maxLength: 100
                      description: Required if active=true, unless present already from the draft version
                    purposeDescription:
                      type: string
                      maxLength: 500
                      description: Required if active=true, unless present already from the draft version
                    lawfulBasis:
                      type: string
                      enum:
                      - contract
                      description: Required if active=true, unless present already from the draft version
                    codeOfConduct:
                      type: string
                      format: uri
                      description: URL to code of conduct
                    dataAgreementId:
                      type: string
                      description: ID of the connected Data Agreement, if included, must provide revision ID and hash
                    dataAgreementRevisionId:
                      type: string
                      description: ID of the connected Data Agreement Revision, if included, must provide Data Agreement ID and revision hash
                    dataAgreementRevisionHash:
                      type: string
                      description: Hash of the connected Data Agreement Revision, if included, must provide Data Agreement ID and revision ID
                    presentationDefinitionId:
                      type: string
                      description: ID of the connected Presentation Definition
                    active:
                      type: boolean
                      description: Publish if true
              type: object
              required:
              - dataDisclosureAgreementTemplate
      responses:
        '200':
          description: Data Disclosure Agreement Template updated
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementTemplate:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate'
                  revision:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                type: object
                required:
                - dataDisclosureAgreementTemplate
                - revision
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update Data Disclosure Agreement Template
      tags:
      - Data Disclosure Agreements
    delete:
      description: Deletes a Data Disclosure Agreement Template.
      parameters:
      - $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateId%7D/get/parameters/0'
      responses:
        '200':
          description: Data Disclosure Agreement Template Deleted
          content:
            application/json:
              schema:
                properties:
                  revision:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                type: object
                required:
                - revision
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Delete Data Disclosure Agreement Template
      tags:
      - Data Disclosure Agreements
  /v3/config/data-disclosure-agreements:
    get:
      description: Lists Data Disclosure Agreement Templates.
      parameters:
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/0'
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/1'
      - description: Filtering data disclosure agreement templates by draft/published status
        in: query
        name: active
        required: false
        schema:
          type: boolean
          default: false
          description: 'If true, only published templates are returned.

            '
      responses:
        '200':
          description: Data Disclosure Agreement Template List
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementTemplates:
                    type: array
                    items:
                      type: object
                      description: 'A template outlines an agreement between a Data Source and  Data Using Service that can be signed by both.

                        '
                      required:
                      - context
                      - id
                      - type
                      - language
                      - version
                      - templateId
                      - templateVersion
                      - dataController
                      - agreementPeriod
                      - dataSharingRestrictions
                      - purpose
                      - purposeDescription
                      - lawfulBasis
                      - dataAttributes
                      - codeOfConduct
                      - dataAgreementId
                      - dataAgreementRevisionId
                      - dataAgreementRevisionHash
                      - presentationDefinitionId
                      - active
                      properties:
                        context:
                          type: array
                          items:
                            type: string
                          description: Array of URIs of JSON-LD contexts
                        id:
                          type: string
                          description: Unique Data Disclosure Agreement Template identifier
                        type:
                          type: array
                          items:
                            type: string
                          example:
                          - DataDisclosureAgreement
                          description: The Data Disclosure Agreement type from context
                        language:
                          type: string
                          description: ISO 639-1 language code (e.g. 'en' or 'sv')
                        version:
                          type: string
                          description: The version of this Data Disclosure Agreement Template
                        templateId:
                          type: string
                          description: Unique Data Disclosure Agreement Template identifier (derived from 'id')
                        templateVersion:
                          type: string
                          description: The version of this Data Disclosure Agreement Template (derived from 'version')
                        dataController:
                          $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate/properties/dataController'
                        agreementPeriod:
                          type: integer
                          description: Days for which agreement is valid
                        dataSharingRestrictions:
                          $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate/properties/dataSharingRestrictions'
                        purpose:
                          type: string
                          description: Purpose of the Data Disclosure Agreement
                        purposeDescription:
                          type: string
                          description: Description of the Data Disclosure Agreement
                        lawfulBasis:
                          type: string
                          enum:
                          - contract
                          description: Lawful basis for the Data Disclosure Agreement
                        dataAttributes:
                          type: array
                          items:
                            $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate/properties/dataAttributes/items'
                        codeOfConduct:
                          type: string
                          description: URL to code of conduct
                        dataAgreementId:
                          type: string
                          description: ID of the connected Data Agreement
                        dataAgreementRevisionId:
                          type: string
                          description: ID of the connected Data Agreement Revision
                        dataAgreementRevisionHash:
                          type: string
                          description: Hash of the connected Data Agreement Revision
                        active:
                          type: boolean
                          description: Whether the Data Disclosure Agreement is published or not
                        presentationDefinitionId:
                          type: string
                          description: ID of the connected Presentation Definition
                        openApiSpecification:
                          type: object
                          description: OpenAPI specification of the Data Agreement, defining available APIs for Data Using Services
                        revisions:
                          type: array
                          items:
                            $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                          description: List of revisions for this Data Disclosure Agreement Template
                  pagination:
                    type: object
                    $ref: '#/paths/~1v2~1config~1webhooks/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
                reqiured:
                - dataDisclosureAgreementTemplates
                - pagination
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List Data Disclosure Agreement Templates
      tags:
      - Data Disclosure Agreements
  ? /v3/config/data-disclosure-agreement/{dataDisclosureAgreementTemplateId}/revision/{dataDisclosureAgreementTemplateRevisionId}
  : get:
      description: Reads a Data Disclosure Agreement Template Revision.
      parameters:
      - $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateId%7D/get/parameters/0'
      - $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateRevisionId%7D~1record~1%7BdataDisclosureAgreementRecordId%7D/get/parameters/0'
      responses:
        '200':
          description: Data Disclosure Agreement Template Revision Read
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementTemplate:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate'
                  revision:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                type: object
                required:
                - dataDisclosureAgreementTemplate
                - revision
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read Data Disclosure Agreement Template Revision
      tags:
      - Data Disclosure Agreements
  /v3/config/data-disclosure-agreement/{dataDisclosureAgreementTemplateId}/revisions:
    get:
      description: Lists Data Disclosure Agreement Template Revisions.
      parameters:
      - $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateId%7D/get/parameters/0'
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/0'
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/1'
      responses:
        '200':
          description: Data Disclosure Agreement Template Revisions List
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementTemplate:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementTemplate'
                  revisions:
                    type: array
                    items:
                      $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                  pagination:
                    type: object
                    $ref: '#/paths/~1v2~1config~1webhooks/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
                required:
                - dataDisclosureAgreementTemplate
                - revisions
                - pagination
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List Data Disclosure Agreement Template Revisions
      tags:
      - Data Disclosure Agreements
  /v3/config/data-disclosure-agreement/{dataDisclosureAgreementTemplateRevisionId}/record/{dataDisclosureAgreementRecordId}:
    get:
      description: Reads a Data Disclosure Agreement Record.
      parameters:
      - name: dataDisclosureAgreementTemplateRevisionId
        in: path
        description: Unique ID of a Data Disclosure Template Revision
        required: true
        schema:
          type: string
      - name: dataDisclosureAgreementRecordId
        in: path
        description: Unique ID of a Data Disclosure Record
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Data Disclosure Agreement Record Read
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementRecord:
                    type: object
                    description: 'A record represents an Agreement between a Data Source and Data Using Service  that can be signed by both, based on the updated Go structure. The Opt-In value determines whether the record is active and data can be shared to the Data Using Service. The Opt-In value is only valid for records containing both signatures.

                      '
                    required:
                    - id
                    - canonicalId
                    - dataDisclosureAgreementTemplateRevision
                    - dataSourceSignature
                    - dataUsingServiceSignature
                    - optIn
                    - timestamp
                    - organisationId
                    - organisationRole
                    - isDeleted
                    properties:
                      id:
                        type: string
                        description: Unique Data Disclosure Agreement Record identifier.
                      canonicalId:
                        type: string
                        description: The cross-organisational identifier for the record.
                      dataDisclosureAgreementTemplateRevision:
                        description: The full revision object of the Data Disclosure Agreement Template which the record is based on.
                        $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                      dataSourceSignature:
                        description: The signature provided by the Data Source.
                        type: object
                        title: Signature
                        x-not-in-database: false
                        required:
                        - id
                        - payload
                        - signature
                        - signatureDecoded
                        - verificationMethod
                        - verificationPayload
                        - verificationPayloadHash
                        - verificationSignedBy
                        - verificationSignedAs
                        - verificationJwsHeader
                        - timestamp
                        - signedWithoutObjectReference
                        - objectType
                        - objectReference
                        properties:
                          id:
                            type: string
                            description: Unique signature identifier
                          payload:
                            type: string
                            description: The Data Disclosure Agreement Record (as a stringified JSON object)
                          signature:
                            type: string
                            description: JWT signature
                          signatureDecoded:
                            type: object
                            description: Decoded signature, containing claims used from the signature JWT
                          verificationMethod:
                            type: string
                            description: 'A well-known string denoting which method is used. Valid values: ''keybinding_jwt'''
                          verificationPayload:
                            type: string
                            description: The keybinding JWT payload that was signed to produce the signature
                          verificationPayloadHash:
                            type: string
                            description: Internally generated cryptographic hash of the value to be signed, i.e. the value of verificationPayload
                          verificationSignedBy:
                            type: string
                            description: Because an identifier's information may change over time, there is a need to store that information at the time of signing. In the case of a cryptographic signature, this field should contain some identifier for looking up or verifying the public key of the signing party.
                          verificationSignedAs:
                            type: string
                            description: Either signed as a "data_source" or as a "data_using_service"
                            enum:
                            - data_source
                            - data_using_service
                          verificationJwsHeader:
                            type: string
                            description: Alternative to the verificationMethod, verificationHash and verificationSignature, give a JWS serialised object (RFC7515)
                          timestamp:
                            type: string
                            description: Timestamp of signature
                          signedWithoutObjectReference:
                            type: boolean
                            description: Indicates that objectReference was left blank in the serialised version that was signed, always false for Data Disclosure Agreement Record signatures
                          objectType:
                            type: string
                            description: Name of the schema model that objectReference points to, in this case "data_disclosure_agreement_record"
                            enum:
                            - data_disclosure_agreement_record
                          objectReference:
                            type: string
                            description: In the case of a data_disclosure_agreement_record, this is the ID of the record that was signed
                      dataUsingServiceSignature:
                        description: The signature provided by the Data Using Service.
                        $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateRevisionId%7D~1record~1%7BdataDisclosureAgreementRecordId%7D/get/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementRecord/properties/dataSourceSignature'
                      optIn:
                        type: boolean
                        description: Whether the record is active and data can be shared to the Data Using Service.
                      timestamp:
                        type: string
                        description: The timestamp of when the latest signature was added.
                      organisationId:
                        type: string
                        description: The ID of the organisation this record belongs to (both organisation keep a copy).
                      organisationRole:
                        type: string
                        description: The role of the organisation in this agreement (e.g., data_source).
                        enum:
                        - data_source
                        - data_using_service
                      isDeleted:
                        type: boolean
                        description: If the record is deleted.
                  revision:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                type: object
                required:
                - dataDisclosureAgreementRecord
                - revision
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read Data Disclosure Agreement Record
      tags:
      - Data Disclosure Agreements
  /v3/config/data-disclosure-agreement/records:
    get:
      description: 'Lists all Data Disclosure Agreement Records for the organisation, depending on  the role of the organisation for the record, "data_source" or  "data_using_service".

        '
      parameters:
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/0'
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/1'
      - name: organisationRole
        in: query
        description: Filter by Organisation Role for the Data Disclosure Record, "data_source" or "data_using_service"
        required: true
        schema:
          type: string
      - name: signStatus
        in: query
        description: Filter by whether the status of the Data Disclosure Record is "sign" or "unsign" (e.g. active or inactive)
        required: false
        schema:
          type: string
      responses:
        '200':
          description: Data Disclosure Agreement Record List
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementRecords:
                    type: array
                    items:
                      $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateRevisionId%7D~1record~1%7BdataDisclosureAgreementRecordId%7D/get/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementRecord'
                  pagination:
                    $ref: '#/paths/~1v2~1config~1webhooks/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
                required:
                - dataDisclosureAgreementRecords
                - pagination
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all Data Disclosure Agreement Records
      tags:
      - Data Disclosure Agreement Records
  ? /v3/config/data-disclosure-agreement/{dataDisclosureAgreementTemplateRevisionId}/record/{dataDisclosureAgreementRecordId}/revision/{dataDisclosureAgreementRecordRevisionId}
  : get:
      description: Reads a Data Disclosure Agreement Record Revision.
      parameters:
      - $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateRevisionId%7D~1record~1%7BdataDisclosureAgreementRecordId%7D/get/parameters/0'
      - $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateRevisionId%7D~1record~1%7BdataDisclosureAgreementRecordId%7D/get/parameters/1'
      - name: dataDisclosureAgreementRecordRevisionId
        in: path
        description: Unique ID of a Data Disclosure Record Revision
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Data Disclosure Agreement Record Revision Read
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementRecord:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateRevisionId%7D~1record~1%7BdataDisclosureAgreementRecordId%7D/get/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementRecord'
                  revision:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                type: object
                required:
                - dataDisclosureAgreementRecord
                - revision
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read Data Disclosure Agreement Record Revision
      tags:
      - Data Disclosure Agreements
  ? /v3/config/data-disclosure-agreement/{dataDisclosureAgreementTemplateRevisionId}/record/{dataDisclosureAgreementRecordId}/revisions
  : get:
      description: Lists Data Disclosure Agreement Record Revisions for a specific record.
      parameters:
      - $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateRevisionId%7D~1record~1%7BdataDisclosureAgreementRecordId%7D/get/parameters/0'
      - $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateRevisionId%7D~1record~1%7BdataDisclosureAgreementRecordId%7D/get/parameters/1'
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/0'
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/1'
      responses:
        '200':
          description: Data Disclosure Agreement Record Revision List
          content:
            application/json:
              schema:
                properties:
                  dataDisclosureAgreementRecord:
                    $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1%7BdataDisclosureAgreementTemplateRevisionId%7D~1record~1%7BdataDisclosureAgreementRecordId%7D/get/responses/200/content/application~1json/schema/properties/dataDisclosureAgreementRecord'
                  revisions:
                    type: array
                    items:
                      $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                  pagination:
                    $ref: '#/paths/~1v2~1config~1webhooks/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
                required:
                - dataDisclosureAgreementRecord
                - revisions
                - pagination
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List Data Disclosure Agreement Record Revisions
      tags:
      - Data Disclosure Agreements
  /v3/config/data-disclosure-agreement/records/revisions:
    get:
      description: 'Lists all revisions of Data Disclosure Agreement Records, optionally filtered  by organisation role and/or DDA Template Revision.

        '
      parameters:
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/0'
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/1'
      - $ref: '#/paths/~1v3~1config~1data-disclosure-agreement~1records/get/parameters/2'
      - name: dataDisclosureAgreementTemplateRevisionId
        in: query
        description: Unique ID of a Data Disclosure Template Revision
        required: false
        schema:
          type: string
      responses:
        '200':
          description: Data Disclosure Agreement Record Revision List
          content:
            application/json:
              schema:
                properties:
                  revisions:
                    type: array
                    items:
                      $ref: '#/paths/~1v3~1config~1data-disclosure-agreement/post/responses/200/content/application~1json/schema/properties/revision'
                  pagination:
                    $ref: '#/paths/~1v2~1config~1webhooks/get/responses/200/content/application~1json/schema/properties/pagination'
                type: object
                required:
                - revisions
                - pagination
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all revisions for all Data Disclosure Agreement Records
      tags:
      - Data Disclosure Agreements
  /v3/config/data-space/base-configurations:
    post:
      description: Creates Base Configurations related to a Data Marketplace.
      requestBody:
        content:
          application/json:
            schema:
              properties:
                id:
                  description: ID
                  type: string
                baseUrl:
                  description: URL of the Data Marketplace's metadata
                  type: string
                clientId:
                  description: Client ID of the Data Marketplace
                  type: string
                clientSecret:
                  description: Client Secret of the Data Marketplace
                  type: string
              required:
              - id
              - baseUrl
              - clientId
              - clientSecret
              type: object
      responses:
        '200':
          description: Data Marketplace Base Configurations created
          content:
            application/json:
              schema:
                properties:
                  baseConfigurations:
                    $ref: '#/paths/~1v3~1config~1data-space~1base-configurations/post/requestBody/content/application~1json/schema'
                required:
                - baseConfigurations
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create Base Configurations
      tags:
      - Base Configurations
    get:
      description: Reads Base Configurations related to a Data Marketplace.
      responses:
        '200':
          description: Data Marketplace Base Configurations read
          content:
            application/json:
              schema:
                properties:
                  baseConfigurations:
                    $ref: '#/paths/~1v3~1config~1data-space~1base-configurations/post/requestBody/content/application~1json/schema'
                required:
                - baseConfigurations
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read Base Configurations
      tags:
      - Base Configurations
    put:
      description: Updates Base Configurations related to a Data Marketplace.
      requestBody:
        content:
          application/json:
            schema:
              properties:
                baseUrl:
                  description: URL of the Data Marketplace's metadata
                  type: string
                clientId:
                  description: Client ID of the Data Marketplace
                  type: string
                clientSecret:
                  description: Client Secret of the Data Marketplace
                  type: string
              required:
              - baseUrl
              - clientId
              - clientSecret
              type: object
      responses:
        '200':
          description: Data Marketplace Base Configurations updated
          content:
            application/json:
              schema:
                properties:
                  baseConfigurations:
                    $ref: '#/paths/~1v3~1config~1data-space~1base-configurations/post/requestBody/content/application~1json/schema'
                required:
                - baseConfigurations
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update Base Configurations
      tags:
      - Base Configurations
    delete:
      description: Deletes Base Configurations related to a Data Marketplace.
      responses:
        '200':
          description: Data Marketplace Base Configurations delete
          content:
            application/json:
              schema:
                properties:
                  baseConfigurations:
                    $ref: '#/paths/~1v3~1config~1data-space~1base-configurations/post/requestBody/content/application~1json/schema'
                required:
                - baseConfigurations
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Delete Base Configurations
      tags:
      - Base Configurations
  /v3/config/data-space/access-point-endpoint:
    get:
      description: Reads Access Point Configuration of the organisation.
      responses:
        '200':
          description: Data Marketplace Base Configurations read
          content:
            application/json:
              schema:
                properties:
                  accessPointEndpoint:
                    description: The access point configuration of the organisation
                    type: string
                required:
                - accessPointEndpoint
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read Access Point Configuration
      tags:
      - Base Configurations
  /v3/config/data-space/oauth2-client:
    post:
      description: Creates an OAuth2 Client for use with a Data Marketplace.
      requestBody:
        content:
          application/json:
            schema:
              properties:
                clientName:
                  description: Client Name of the OAuth2 Client
                  type: string
                clientDescription:
                  description: Client Description of the OAuth2 Client
                  type: string
              required:
              - clientName
              type: object
      responses:
        '200':
          description: Data Marketplace related OAuth2 Client created
          content:
            application/json:
              schema:
                properties:
                  oauth2Client:
                    type: object
                    $ref: '#/paths/~1v3~1config~1data-space~1oauth2-clients/get/responses/200/content/application~1json/schema/properties/oauth2Clients/items'
                type: object
                reqiured:
                - oauth2Client
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      summary: Create OAuth2.0 Client
      tags:
      - Base Configurations
  /v3/config/data-space/oauth2-client/{clientId}:
    get:
      description: Reads a Data Marketplace related OAuth2 Client.
      parameters:
      - name: clientId
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Data Marketplace related OAuth2 Client read
          content:
            application/json:
              schema:
                properties:
                  oauth2Client:
                    type: object
                    $ref: '#/paths/~1v3~1config~1data-space~1oauth2-clients/get/responses/200/content/application~1json/schema/properties/oauth2Clients/items'
                type: object
                reqiured:
                - oauth2Client
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      summary: Read OAuth2.0 Client
      tags:
      - Base Configurations
    put:
      description: Updates an OAuth2 Client for use with a Data Marketplace.
      parameters:
      - name: clientId
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/paths/~1v3~1config~1data-space~1oauth2-client/post/requestBody/content/application~1json/schema'
      responses:
        '200':
          description: Data Marketplace related OAuth2 Client updated
          content:
            application/json:
              schema:
                properties:
                  oauth2Client:
                    type: object
                    $ref: '#/paths/~1v3~1config~1data-space~1oauth2-clients/get/responses/200/content/application~1json/schema/properties/oauth2Clients/items'
                type: object
                reqiured:
                - oauth2Client
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      summary: Update OAuth2.0 Client
      tags:
      - Base Configurations
    delete:
      description: Deletes a Data Marketplace related OAuth2 Client.
      parameters:
      - name: clientId
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Data Marketplace related OAuth2 Client deleted
          content:
            application/json:
              schema:
                properties:
                  oauth2Client:
                    type: object
                    $ref: '#/paths/~1v3~1config~1data-space~1oauth2-clients/get/responses/200/content/application~1json/schema/properties/oauth2Clients/items'
                type: object
                reqiured:
                - oauth2Client
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      summary: Delete OAuth2.0 Client
      tags:
      - Base Configurations
  /v3/config/data-space/oauth2-clients:
    get:
      description: Lists OAuth2 Clients for use with a Data Marketplace.
      parameters:
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/0'
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/1'
      responses:
        '200':
          description: Data Marketplace related OAuth2 Clients listed
          content:
            application/json:
              schema:
                properties:
                  oauth2Clients:
                    type: array
                    items:
                      properties:
                        clientId:
                          description: ID of the OAuth2 Client
                          type: string
                        clientSecret:
                          description: Secret of the OAuth2 Client
                          type: string
                        clientName:
                          description: Name of the OAuth2 Client
                          type: string
                        clientDescription:
                          description: Description of the OAuth2 Client
                          type: string
                        grantTypes:
                          description: Grant Types allowed for the OAuth2 Client
                          type: string
                        timestamp:
                          description: Timestamp of the OAuth2 Client creation or last modification
                          type: int
                      required:
                      - clientId
                      - clientSecret
                      - clientName
                      - grantTypes
                      - timestamp
                      type: object
                  pagination:
                    type: object
                    $ref: '#/paths/~1v2~1config~1webhooks/get/responses/200/content/application~1json/schema/properties/pagination'
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      summary: List OAuth2.0 Clients
      tags:
      - Base Configurations
  /v3/config/data-space/pull-data:
    post:
      description: 'The Pull Data endpoint allows a Data Using Service to Pull Data according to a  specific Data Disclosure Agreement record signed by themselves and a Data  Source, either anonymously or for a specific individual.

        '
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                dataDisclosureAgreementRecordId:
                  type: string
                  description: Data Disclosure Agreement Record ID
                individualId:
                  type: string
                  description: Individual ID
              required:
              - dataDisclosureAgreementRecordId
      responses:
        '200':
          description: Successful Access Token release
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                    description: Access token to be used at Resource Server
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Pull Data Endpoint
      tags:
      - Data Marketplace
  /v3/config/data-space/pull-data-record/{pullDataRecordId}:
    get:
      description: Reads a specific Pull Data Record.
      parameters:
      - description: ID of the Pull Data Record between a Data Source and Data Using Service
        in: path
        name: pullDataRecordId
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Pull Data Record read
          content:
            application/json:
              schema:
                properties:
                  pullDataRecord:
                    type: object
                    $ref: '#/paths/~1v3~1config~1data-space~1pull-data-records/get/responses/200/content/application~1json/schema/properties/pullDataRecords/items'
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read Pull Data Record
      tags:
      - Signed Agreements
  /v3/config/data-space/pull-data-records:
    get:
      description: 'Lists Pull Data Records, optionally filtered by Data Disclosure Agreement  Template (Revision ID) and/or Data Disclosure Agreement Record (Revision ID).

        '
      parameters:
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/0'
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/1'
      - description: Filter by Data Disclosure Agreement Template Revision ID
        in: query
        name: dataDisclosureAgreementTemplateRevisionId
        required: false
        schema:
          type: string
      - description: Filter by Data Disclosure Agreement Record Revision ID
        in: query
        name: dataDisclosureAgreementRecordRevisionId
        required: false
        schema:
          type: string
      responses:
        '200':
          description: Pull Data Records listed
          content:
            application/json:
              schema:
                properties:
                  pullDataRecords:
                    type: array
                    items:
                      description: Record of a Pull Data request
                      properties:
                        id:
                          description: ID of the Pull Data Record between a Data Source and Data Using Service
                          type: string
                        dataDisclosureAgreementTemplateRevisionId:
                          description: ID of the Data Disclosure Agreement Template Revision that defines data was pulled against
                          type: string
                        dataDisclosureAgreementRecordRevisionId:
                          description: ID of the Data Disclosure Agreement Record Revision that defines the agreement between the Data Source and Data Using Service
                          type: string
                        nonce:
                          description: Randomly generated nonce
                          type: string
                        createdAt:
                          description: Timestamp of the Pull Data Record creation
                          type: int
                        token:
                          description: The Access Token used for pulling data
                          type: string
                      required:
                      - id
                      - dataDisclosureAgreementTemplateRevisionId
                      - dataDisclosureAgreementRecordRevisionId
                      - nonce
                      - createdAt
                      - token
                      type: object
                  pagination:
                    type: object
                    $ref: '#/paths/~1v2~1config~1webhooks/get/responses/200/content/application~1json/schema/properties/pagination'
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List Pull Data Records
      tags:
      - Signed Agreements
  /v2/config/webhook:
    post:
      deprecated: false
      description: This endpoint is used to create a webhook to trigger events to an external IT system.
      operationId: configCreateWebhook
      requestBody:
        content:
          application/json:
            schema:
              properties:
                webhook:
                  required:
                  - payloadUrl
                  - contentType
                  - subscribedEvents
                  - disabled
                  - secretKey
                  - skipSslVerification
                  - timestamp
                  type: object
                  title: Webhook
                  properties:
                    payloadUrl:
                      type: string
                      description: Webhook payload Url
                    contentType:
                      type: string
                      description: Webhook payload content type
                      enum:
                      - application/json
                      - application/x-www-form-urlencoded
                    subscribedEvents:
                      type: object
                      title: subscribedEvents
                      properties:
                        consentManagementWebhook:
                          type: array
                          items:
                            type: string
                            description: Subscribed event
                            enum:
                            - data.update.initiated
                            - data.update.cancelled
                            - consent.allowed
                            - consent.disallowed
                            - consent.auto_expiry
                            - org.unsubscribed
                            - data.delete.initiated
                            - data.download.initiated
                            - data.delete.cancelled
                            - data.download.cancelled
                            - org.subscribed
                        digitalWalletWebhook:
                          type: array
                          items:
                            type: string
                            description: Subscribed event
                            enum:
                            - digitalwallet.connection.init
                            - digitalwallet.connection.invitation
                            - digitalwallet.connection.request
                            - digitalwallet.connection.response
                            - digitalwallet.connection.active
                            - digitalwallet.connection.error
                            - digitalwallet.connection.inactive
                            - digitalwallet.connection.delete
                            - digitalwallet.credential.proposal_sent
                            - digitalwallet.credential.proposal_received
                            - digitalwallet.credential.offer_sent
                            - digitalwallet.credential.offer_received
                            - digitalwallet.credential.request_sent
                            - digitalwallet.credential.request_received
                            - digitalwallet.credential.credential_issued
                            - digitalwallet.credential.credential_received
                            - digitalwallet.credential.credential_acked
                            - digitalwallet.presentation.proposal_sent
                            - digitalwallet.presentation.proposal_received
                            - digitalwallet.presentation.request_sent
                            - digitalwallet.presentation.request_received
                            - digitalwallet.presentation.presentation_sent
                            - digitalwallet.presentation.presentation_received
                            - digitalwallet.presentation.verified
                            - digitalwallet.presentation.presentation_acked
                            - openid.credential.offer_sent
                            - openid.credential.offer_received
                            - openid.credential.credential_issued
                            - openid.credential.credential_acked
                            - openid.credential.credential_pending
                            - openid.presentation.request_sent
                            - openid.presentation.request_sent.v3
                            - openid.presentation.request_received
                            - openid.presentation.request_received.v3
                            - openid.presentation.presentation_acked
                            - openid.presentation.presentation_acked.v3
                            - openid.presentation.presentation_pending
                            - openid.presentation.presentation_pending.v3
                        dataMarketplaceWebhook:
                          type: array
                          items:
                            type: string
                            description: Subscribed event
                            enum:
                            - datamarketplace.data_disclosure_agreement_record
                    disabled:
                      type: boolean
                      description: Is webhook disabled or not
                    secretKey:
                      type: string
                      description: Secret key for checking authenticity of the source
                    skipSslVerification:
                      type: boolean
                      description: Skip SSL verification for webhook Url
              type: object
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                properties:
                  webhook:
                    required:
                    - payloadUrl
                    - contentType
                    - subscribedEvents
                    - disabled
                    - secretKey
                    - skipSslVerification
                    - timestamp
                    type: object
                    title: Webhook
                    properties:
                      id:
                        type: string
                        description: Webhook ID
                      orgId:
                        type: string
                        description: Organisation ID
                      payloadUrl:
                        type: string
                        description: Webhook payload Url
                      contentType:
                        type: string
                        description: Webhook payload content type
                        enum:
                        - application/json
                        - application/x-www-form-urlencoded
                      subscribedEvents:
                        $ref: '#/paths/~1v2~1config~1webhook/post/requestBody/content/application~1json/schema/properties/webhook/properties/subscribedEvents'
                      disabled:
                        type: boolean
                        description: Is webhook disabled or not
                      secretKey:
                        type: string
                        description: Secret key for checking authenticity of the source
                      skipSslVerification:
                        type: boolean
                        description: Skip SSL verification for webhook Url
                      timestamp:
                        type: string
                        description: Creation timestamp
                type: object
          description: Created
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Create webhook
      tags:
      - Webhook
  /v2/config/webhook/{webhookId}:
    get:
      deprecated: false
      description: This endpoint is used to read a webhook by its ID.
      operationId: configReadWebhook
      parameters:
      - in: path
        name: webhookId
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  webhook:
                    $ref: '#/paths/~1v2~1config~1webhook/post/responses/201/content/application~1json/schema/properties/webhook'
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read webhook
      tags:
      - Webhook
    put:
      deprecated: false
      description: This endpoint is used to update an existing webhook to trigger events to an external IT system.
      operationId: configUpdateWebhook
      parameters:
      - in: path
        name: webhookId
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              properties:
                webhook:
                  $ref: '#/paths/~1v2~1config~1webhook/post/requestBody/content/application~1json/schema/properties/webhook'
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  webhook:
                    $ref: '#/paths/~1v2~1config~1webhook/post/responses/201/content/application~1json/schema/properties/webhook'
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Update webhook
      tags:
      - Webhook
    delete:
      deprecated: false
      description: This endpoint is used to delete an existing webhook that was defined to trigger events to an external IT system.
      operationId: configDeleteWebhook
      parameters:
      - in: path
        name: webhookId
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  webhook:
                    $ref: '#/paths/~1v2~1config~1webhook/post/responses/201/content/application~1json/schema/properties/webhook'
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Delete webhook
      tags:
      - Webhook
  /v2/config/webhooks:
    get:
      deprecated: false
      description: This endpoint is used to get all webhooks that was defined to trigger events to an external IT system.
      operationId: configListWebhooks
      parameters:
      - description: Requested index for start of resources to be provided in response requested by client
        in: query
        name: offset
        required: false
        schema:
          type: integer
      - name: limit
        in: query
        description: Number of items returned per page. Requested number of resources to be provided in response requested by client.
        required: false
        schema:
          type: integer
          default: 10
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  pagination:
                    type: object
                    title: Pagination
                    properties:
                      currentPage:
                        type: integer
                        description: Current page number
                      totalItems:
                        type: integer
                        description: Total number of items available
                      totalPages:
                        type: integer
                        description: Total number of pages based on limit
                      limit:
                        type: integer
                        description: Number of items per page
                      hasPrevious:
                        type: boolean
                        description: Indicates if there's a previous page
                      hasNext:
                        type: boolean
                        description: Indicates if there's a next page
                  webhooks:
                    items:
                      description: Webhook
                      oneOf:
                      - $ref: '#/paths/~1v2~1config~1webhook/post/responses/201/content/application~1json/schema/properties/webhook'
                    type: array
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all webhooks
      tags:
      - Webhook
  /v2/config/webhooks/event-types:
    get:
      deprecated: false
      description: This endpoint is used to list all webhook event types.
      operationId: configReadWebhookEventTypes
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  consentManagementWebhookEventTypes:
                    items:
                      type: string
                      title: consentManagementWebhookEventTypes
                      enum:
                      - consent.allowed
                      - consent.auto_expiry
                      - data.delete.initiated
                      - data.update.initiated
                      - data.download.cancelled
                      - data.update.cancelled
                      - data.download.initiated
                      - data.delete.cancelled
                      - consent.disallowed
                    type: array
                  digitalWalletWebhookEventTypes:
                    items:
                      type: string
                      title: digitalWalletWebhookEventTypes
                      enum:
                      - digitalwallet.connection.init
                      - digitalwallet.connection.invitation
                      - digitalwallet.connection.request
                      - digitalwallet.connection.response
                      - digitalwallet.connection.active
                      - digitalwallet.connection.error
                      - digitalwallet.connection.inactive
                      - digitalwallet.connection.delete
                      - digitalwallet.credential.proposal_sent
                      - digitalwallet.credential.proposal_received
                      - digitalwallet.credential.offer_sent
                      - digitalwallet.credential.offer_received
                      - digitalwallet.credential.request_sent
                      - digitalwallet.credential.request_received
                      - digitalwallet.credential.credential_issued
                      - digitalwallet.credential.credential_received
                      - digitalwallet.credential.credential_acked
                      - digitalwallet.presentation.proposal_sent
                      - digitalwallet.presentation.proposal_received
                      - digitalwallet.presentation.request_sent
                      - digitalwallet.presentation.request_received
                      - digitalwallet.presentation.presentation_sent
                      - digitalwallet.presentation.presentation_received
                      - digitalwallet.presentation.verified
                      - digitalwallet.presentation.presentation_acked
                      - openid.credential.offer_sent
                      - openid.credential.offer_received
                      - openid.credential.credential_issued
                      - openid.credential.credential_acked
                      - openid.credential.credential_pending
                      - openid.presentation.request_sent
                      - openid.presentation.request_sent.v3
                      - openid.presentation.request_received
                      - openid.presentation.request_received.v3
                      - openid.presentation.presentation_acked
                      - openid.presentation.presentation_acked.v3
                      - openid.presentation.presentation_pending
                      - openid.presentation.presentation_pending.v3
                    type: array
                  dataMarketplaceWebhookEventTypes:
                    items:
                      type: string
                      title: dataMarketplaceWebhookEventTypes
                      enum:
                      - datamarketplace.data_disclosure_agreement_record
                    type: array
                required:
                - consentManagementWebhookEventTypes
                - digitalWalletWebhookEventTypes
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read webhook event types
      tags:
      - Webhook
  /v2/config/webhooks/payload/content-types:
    get:
      deprecated: false
      description: This endpoint is used to get webhook content types.
      operationId: getWebhookPayloadContentTypes.yaml
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  ContentTypes:
                    items:
                      enum:
                      - application/json
                      - application/x-www-form-urlencoded
                      type: string
                    type: array
                required:
                - ContentTypes
                type: object
          description: OK
          headers: {}
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List all webhook content types
      tags:
      - Webhook
  /v3/config/data-space/validate-access-record/{validateAccessRecordId}:
    get:
      description: Reads a specific Validate Access Record.
      parameters:
      - description: ID of the Validate Access Record
        in: path
        name: validateAccessRecordId
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Validate Access Record read
          content:
            application/json:
              schema:
                properties:
                  validateAccessRecord:
                    type: object
                    $ref: '#/paths/~1v3~1config~1data-space~1validate-access-records/get/responses/200/content/application~1json/schema/properties/validateAccessRecords/items'
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: Read Validate Access Record
      tags:
      - Access Logs
  /v3/config/data-space/validate-access-records:
    get:
      description: 'Lists Validate Access Records which show every time an access token was checked at the token verification and authorisation endpoint (validate access).

        '
      parameters:
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/0'
      - $ref: '#/paths/~1v2~1config~1webhooks/get/parameters/1'
      responses:
        '200':
          description: Validate Access Records listed
          content:
            application/json:
              schema:
                properties:
                  validateAccessRecords:
                    type: array
                    items:
                      description: Record of an access token validation and authorisation attempt
                      properties:
                        id:
                          type: string
                          description: Unique identifier for the validation record
                        requestedDataDisclosureAgreementRecordId:
                          type: string
                          description: ID of the Data Disclosure Agreement Record connected to the access token
                        requestedDataClassification:
                          type: string
                          description: Data classification requested (e.g., "pii", "anonymous") in the access token
                          enum:
                          - pii
                          - anonymous
                        requestedExternalIdType:
                          type: string
                          description: Type of external ID requested (only for PII classification)
                        requestedExternalId:
                          type: string
                          description: External ID value requested (only for PII classification)
                        connectedAgreementIds:
                          type: object
                          description: 'Holds the specific revision ID for the record connected to the access token, as well as the connected Data Disclosure Agreement Template Revision ID and the underlying Data Agreement Revision ID.

                            '
                          properties:
                            dataDisclosureAgreementRecordRevisionId:
                              type: string
                              description: ID of the specific Data Disclosure Agreement Record Revision the token was released for
                            dataDisclosureAgreementTemplateRevisionId:
                              type: string
                              description: ID of the specific Data Disclosure Agreement Template Revision that the record was signed for
                            dataAgreementRevisionId:
                              type: string
                              description: ID of the underlying Data Agreement Revision that defines the data to be shared between the Data Source and Data Using Service
                        request:
                          type: object
                          description: The original validation request
                          properties:
                            accessToken:
                              type: string
                              description: The JWT Access Token that was validated
                            httpMethod:
                              type: string
                              description: The HTTP method that was requested
                            path:
                              type: string
                              description: The API path that was requested
                          required:
                          - accessToken
                          - httpMethod
                          - path
                        response:
                          oneOf:
                          - type: object
                            description: Successful access token validation response
                            properties:
                              verified:
                                type: boolean
                                description: Whether the access token was verified and authorized
                                enum:
                                - true
                                example: true
                              dataClassification:
                                type: string
                                description: Data classification of the validated access
                                enum:
                                - pii
                                - anonymous
                              individuals:
                                type: array
                                description: List of individuals associated with this access
                                items:
                                  allOf:
                                  - type: object
                                    title: Individual
                                    description: Shallowly models an Individual which may reference some instance in an external system (registration system, functional ID, foundational ID etc). An Individual instance of this model is not to be mistaken with a unique natural individual. It is up to the system owner to decide if this record permits mapping to a natural individual and/or if a single Individual row can map to several consent agreements.
                                    x-not-in-database: false
                                    properties:
                                      id:
                                        type: string
                                        format: ''
                                        example: ''
                                        description: The unique ID of an Individual row.
                                      externalId:
                                        type: string
                                        format: ''
                                        example: ''
                                        description: Reference to another foundational/functional ID, which is likely PII
                                      externalIdType:
                                        type: string
                                        format: ''
                                        example: ''
                                        description: External ID type specifier. A string. For instance "email" or "foundational ID". Can be used in later queries.
                                      identityProviderId:
                                        type: string
                                        format: ''
                                        example: ''
                                        description: This could be an FK, but for now we do not have a mapping of identity providers. IDBB may have more requirements.
                                  - type: object
                                    title: IndividualExtras
                                    required:
                                    - name
                                    - email
                                    - phone
                                    properties:
                                      name:
                                        type: string
                                        description: Name of the individual
                                      iamId:
                                        type: string
                                        description: Create a user in keycloak and save the `id` as `iamId`
                                      email:
                                        type: string
                                        description: Email ID
                                      phone:
                                        type: string
                                        description: Phone
                                      pushNotificationToken:
                                        type: string
                                        description: Device token of the individual
                                      deviceType:
                                        type: string
                                        description: Device type(OS) of the individual
                                        enum:
                                        - android
                                        - ios
                                      mapperId:
                                        type: string
                                        description: Defines the mapper id of the individual
                              decodedClaims:
                                type: object
                                description: The decoded JWT claims. The fields listed below will be present; additional claims are allowed.
                                properties:
                                  aud:
                                    type: string
                                    description: The audience of the JWT
                                  dataClassification:
                                    type: string
                                    enum:
                                    - anonymous
                                    - pii
                                    description: The data classification of the requested resource
                                  dataDisclosureAgreementRecordId:
                                    type: string
                                    description: The ID of the Data Disclosure Agreement Record associated with this token
                                  exp:
                                    type: integer
                                    description: The expiration time of the JWT
                                  iat:
                                    type: integer
                                    description: The issued at time of the JWT
                                  iss:
                                    type: string
                                    description: The issuer of the JWT
                                  jti:
                                    type: string
                                    description: The unique identifier for the JWT
                                required:
                                - aud
                                - dataClassification
                                - dataDisclosureAgreementRecordId
                                - exp
                                - iat
                                - iss
                                - jti
                                additionalProperties: true
                            required:
                            - verified
                            - dataClassification
                            - individuals
                            - decodedClaims
                          - type: object
                            description: Failed access token validation response
                            properties:
                              verified:
                                type: boolean
                                description: Whether the access token was verified and authorized
                                enum:
                                - false
                                example: false
                              reason:
                                type: string
                                description: The reason why validation failed
                            required:
                            - verified
                            - reason
                          description: The validation response (success or failure)
                        timestamp:
                          type: integer
                          format: int64
                          description: Unix timestamp when the validation occurred
                      required:
                      - id
                      - requestedDataDisclosureAgreementRecordId
                      - requestedDataClassification
                      - connectedAgreementIds
                      - request
                      - response
                      - timestamp
                      type: object
                  pagination:
                    type: object
                    $ref: '#/paths/~1v2~1config~1webhooks/get/responses/200/content/application~1json/schema/properties/pagination'
          headers:
            Content-Type:
              schema:
                type: json
                example: application/json
              description: Content-Type header
      security:
      - BearerAuth: []
      - ApiKey: []
      summary: List Validate Access Records
      tags:
      - Access Logs
tags:
- description: This consists of endpoints available for data agreements.
  name: Data Agreement
  x-tag-expanded: true
- description: This consists of endpoints available for data attributes.
  name: Data Attribute
  x-tag-expanded: true
- description: This consists of endpoints available for data policies.
  name: Data Policy
  x-tag-expanded: true
- description: This consists of endpoints available for individuals.
  name: Individual
  x-tag-expanded: true
- description: This consists of endpoints available for audit purposes.
  name: Audit
  x-tag-expanded: true
- description: This consists of endpoints for configuring webhooks.
  name: Webhook
  x-tag-expanded: true
- description: This consists of endpoints for organisation.
  name: Organisation
  x-tag-expanded: true
- description: This consists of endpoint for identity provider.
  name: Identity Provider
  x-tag-expanded: true
- description: This consists of endpoint for verification.
  name: Verification
  x-tag-expanded: true
- description: This consists of endpoint for consent records.
  name: Consent Record
  x-tag-expanded: true
- description: This consists of endpoint for data sharing.
  name: Data Sharing
  x-tag-expanded: true
- description: This consists of endpoints available for data disclosure agreements.
  name: Base Configurations
  x-tag-expanded: true
- description: This consists of endpoints available for data disclosure agreements.
  name: Data Disclosure Agreements
  x-tag-expanded: true
- description: This consists of endpoints available for data agreements.
  name: Signed Agreements
  x-tag-expanded: true
- description: This consists of endpoints available for authorisation server.
  name: Authorisation Server
  x-tag-expanded: true
- description: This consists of endpoints available for access logs.
  name: Access Logs
  x-tag-expanded: true
