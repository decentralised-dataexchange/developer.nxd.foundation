---
id: config-update-agreement
title: "Update data agreement"
description: "This endpoint allows the admin to update the latest data agreement defined earlier in an organisation. It also returns the updated revision number."
sidebar_label: "Update data agreement"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "put api-method"
info_path: docs/disp-api/disp-api-documentation
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";
import Translate from "@docusaurus/Translate";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Update data agreement"}
>
</Heading>

<MethodEndpoint
  method={"put"}
  path={"/config/data-agreement/{dataAgreementId}"}
  context={"endpoint"}
>
  
</MethodEndpoint>



This endpoint allows the admin to update the latest data agreement defined earlier in an organisation. It also returns the updated revision number.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
>
  <Translate id="theme.openapi.request.title">Request</Translate>
</Heading>

<ParamsDetails
  parameters={[{"description":"Unique ID of an object","in":"path","name":"dataAgreementId","required":true,"schema":{"type":"string"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"properties":{"dataAgreement":{"allOf":[{"type":"object","title":"DataAgreement","description":"An agreement contains the specification of a single purpose that can be consented to.  A DataAgreement is universal and can be consented to by *many* individuals through a DataAgreementRecord.\n","x-not-in-database":false,"required":["purpose","purposeDescription","controllerUrl","controllerName","policy","lawfulBasis","methodOfUse","active","forgettable","lifecycle"],"properties":{"policy":{"description":"Policy under which this DataAgreement shall be governed.  When creating a data agreement, the latest policy can be used to fill the default value,  and organisation admin can decide to change it in the data agreement level.\n","type":"object","title":"Policy","x-not-in-database":false,"required":["name","url"],"properties":{"id":{"type":"string","format":"","example":"","description":""},"name":{"type":"string","format":"","example":"","description":"Name of the policy"},"version":{"type":"string","format":"","example":"","description":"Version of the policy (it can follow the semver format)"},"url":{"type":"string","format":"","example":"","description":"Permanent URL at which this very version of the Policy can be read, should not be allowed to change over time"},"jurisdiction":{"type":"string","format":"","example":"","description":"Jurisdiction"},"industrySector":{"type":"string","format":"","example":"","description":"Industry sector"},"dataRetentionPeriodDays":{"type":"integer","format":"","example":"","description":"Data retention period in days"},"geographicRestriction":{"type":"string","format":"","example":"","description":"Geographic restriction"},"storageLocation":{"type":"string","format":"","example":"","description":"Storage location"},"thirdPartyDataSharing":{"type":"boolean","format":"","example":true,"description":"Third party data sharing"}}},"dataAttributes":{"type":"array","items":{"allOf":[{"type":"object","description":"Data attributes contain specifications of exactly what is collected.","x-not-in-database":false,"required":["name","description"],"properties":{"id":{"type":"string","format":"","example":"","description":"Data attribute ID"},"name":{"type":"string","format":"","example":"","description":"Name of the attribute, for instance \"name\" or \"age\""},"description":{"type":"string","format":"","example":"","description":"Description of the attribute"},"sensitivity":{"type":"boolean","format":"","example":"","description":"Sensitivity of data attribute"},"category":{"type":"string","format":"","example":"","description":"Category of data attribute"},"scope":{"type":"string","format":"","example":"","description":"Scope required for data attribute"}}},{"type":"object","properties":{"restrictions":{"type":"array","items":{"type":"object","description":"List of restrictions","x-not-in-database":false,"properties":{"credDefId":{"type":"string","format":"","example":"H3DW1MUWZyBkP5LG4rTYRH:3:CL:80:default","description":"Credential definition ID"},"schemaId":{"type":"string","format":"","example":"H3DW1MUWZyBkP5LG4rTYRH:2:Certificate Of Registration:6.0.0","description":"Schema ID"}}}}}}]},"description":"Data attributes contain specifications of exactly what is collected.\n"},"purpose":{"type":"string","description":"Name of purpose"},"purposeDescription":{"type":"string","description":"Description of purpose"},"lawfulBasis":{"type":"string","format":"","example":"","description":"Lawful basis of the agreement - consent / legal_obligation / contract / vital_interest / public_task / legitimate_interest","enum":["consent","legal_obligation","contract","vital_interest","public_task","legitimate_interest"]},"methodOfUse":{"type":"string","format":"","example":"","description":"Method of use - null / data_source / data_using_service","enum":[null,"data_source","data_using_service"]},"dpiaDate":{"type":"string","format":"","example":"","description":"The date on which the DPIA report is generated after a DPIA"},"dpiaSummaryUrl":{"type":"string","description":"The URl providing the DPIA result reports, summary etc that can be verified by any interested parties"},"signature":{"x-fk-model":"Signature","description":"Signature of authorising party of DataAgreement (Signatures may be chained in the case of multiple signatures)\n","type":"object","title":"Signature","x-not-in-database":false,"required":["payload","signature","verificationMethod","verificationPayload","verificationPayloadHash","verificationSignedBy","timestamp"],"properties":{"id":{"type":"string","format":"","example":"","description":"Objects may be passed back by some API endpoints without an id (PK), denoting that they are a \"draft\", i.e. a Signature that is not yet stored in the database and only exists in transit."},"payload":{"type":"string","format":"","example":"","description":"The final payload that is signed, constructed as a JSON serialisation of fields {verificationPayload: ..., verificationPayloadHash: ..., verificationMethod: ..., verificationArtifact: ..., verificationSignedBy: ..., verificationJwsHeader, timestamp: ..., signedWithoutObjectReference: ..., objectType: ..., objectReference: ...}. Serialised as a JSON dict. If the signature is generated before anything is stored in the database (and has a PK), then the objectReference should be omitted from the payload but filled in afterwards."},"signature":{"type":"string","format":"","example":"","description":"Signature of payload hash, the format of the signature should be specified by either verificationMethod or verificationJwsHeader"},"verificationMethod":{"type":"string","format":"","example":"","description":"A well-known string denoting which method is used. Valid values: TBD. This might be expanded with supported verification methods. There may be a minimal set of supported methods necessary."},"verificationPayload":{"type":"string","format":"","example":"","description":"Internally generated serialised version of the data referenced by objectType and objectReference - by extracting and serialising their data as JSON"},"verificationPayloadHash":{"type":"string","format":"","example":"","description":"Internally generated cryptographic hash of the value to be signed, i.e. the value of verificationPayload"},"verificationArtifact":{"type":"string","format":"","example":"","description":"A verification artifact in the form of a scanned object, image, signature etc"},"verificationSignedBy":{"type":"string","format":"","example":"","description":"Because an identifier's information may change over time, there is a need to store that information at the time of signing. In the case of a cryptographic signature, this field should contain some identifier for looking up or verifying the public key of the signing party. In the case of a non-cryptographic signature, this field could contain a natural individual's names, personal number, email addresses - store a snapshot that binds to the signature at the time of signing. In the case of a cryptographic signature, this may be the fingerprint of the individual's public key or in some cases, a token from the user's ID session."},"verificationSignedAs":{"type":"string","format":"","example":"","description":"DRAFT FIELD: Specifies the relationship between the authorising signature and the invidual which the payload concerns. This is relevant for Consent Records. Possible values: \"individual\" / \"delegate\"."},"verificationJwsHeader":{"type":"string","format":"","example":"","description":"Alternative to the verificationMethod, verificationHash and verificationSignature, give a JWS serialised object (RFC7515)"},"timestamp":{"type":"string","format":"","example":"","description":"Timestamp of signature, currently this field isn't part of the payload so it's not tamper-proof"},"signedWithoutObjectReference":{"type":"boolean","format":"","example":"","description":"Indicates that objectReference was left blank in the serialised version that was signed"},"objectType":{"type":"string","format":"","example":"","description":"Name of the schema model that objectReference points to. Values: \"signature\" or \"revision\"","enum":["revision","signature"]},"objectReference":{"type":"string","format":"","example":"","description":"A symmetric relation / back reference to the objectType that was signed. We are currently just modelling signing another signature (a chain) or signing a Revision (which can be a revision of a consent record, an agreement, policy etc)."}}},"active":{"type":"boolean","format":"","example":"","description":"DataAgreement is active and new DataAgreementRecords can be created"},"forgettable":{"type":"boolean","format":"","example":"","description":"DataAgreementRecord may be deleted when consent is withdrawn, as its existence is not necessary for auditability."},"compatibleWithVersionId":{"type":"string","format":"","x-fk-model":"DataAgreement","description":"WIP: This field indicates that Data Agreement Records may be transferred from this  compatible previous revision of the same DataAgreement\n"},"dataUsingServices":{"type":"array","items":[{"type":"object","description":"Data using service organisation for the data agreement","x-not-in-database":false,"required":["name","sector","location"],"properties":{"name":{"type":"string","format":"","example":"","description":"Name of the data using service organisation"},"sector":{"type":"string","format":"","example":"","description":"Defines sector of the organisation"},"location":{"type":"string","format":"","example":"","description":"Defines location of the organisation"},"privacyDashboardUrl":{"type":"string","format":"","example":"","description":"Defines privacy dashboard url of the organisation"}}}]},"openApiSpecification":{"type":"object","description":"This field contains OpenAPI specification document describing the API's endpoints, models, and operations."},"dataSources":{"type":"array","items":[{"type":"object","description":"Data source organisation for the data agreement","x-not-in-database":false,"required":["name","sector","location"],"properties":{"name":{"type":"string","format":"","example":"","description":"Name of the data source organisation"},"sector":{"type":"string","format":"","example":"","description":"Defines sector of the organisation"},"location":{"type":"string","format":"","example":"","description":"Defines location of the organisation"},"privacyDashboardUrl":{"type":"string","format":"","example":"","description":"Defines privacy dashboard url of the organisation"}}}]}}},{"type":"object","title":"DataAgreementExtras","required":["dataExchange"],"properties":{"dataExchange":{"type":"object","description":"Data exchange details","properties":{"dataExchangeProfile":{"type":"string","description":"Data exchange profile","enum":["AIP10","OID4VC"]},"id":{"type":"string","description":"Definition id for OID4VC data exchange profile"},"schemaId":{"type":"string","description":"Schema identifier"},"isExistingSchema":{"type":"boolean","description":"Is schema existing"}},"required":["isExistingSchema","schemaId"]}}}],"description":"An object of type DataAgreement"}},"required":["dataAgreement"],"type":"object"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"content":{"application/json":{"schema":{"properties":{"dataAgreement":{"allOf":[{"type":"object","title":"DataAgreement","description":"An agreement contains the specification of a single purpose that can be consented to.  A DataAgreement is universal and can be consented to by *many* individuals through a DataAgreementRecord.\n","x-not-in-database":false,"required":["purpose","purposeDescription","controllerUrl","controllerName","policy","lawfulBasis","methodOfUse","active","forgettable","lifecycle"],"properties":{"id":{"type":"string","format":"","example":"","description":""},"version":{"type":"string","format":"","example":"","description":"The version of this specification to which a receipt conforms"},"controllerId":{"type":"string","description":"ID of the controller"},"controllerUrl":{"type":"string","description":"URL of data controller (may be omitted if no data involved)"},"controllerName":{"type":"string","description":"Name of data controller (may be omitted if no data involved)"},"policy":{"description":"Policy under which this DataAgreement shall be governed.  When creating a data agreement, the latest policy can be used to fill the default value,  and organisation admin can decide to change it in the data agreement level.\n","type":"object","title":"Policy","x-not-in-database":false,"required":["name","url"],"properties":{"id":{"type":"string","format":"","example":"","description":""},"name":{"type":"string","format":"","example":"","description":"Name of the policy"},"version":{"type":"string","format":"","example":"","description":"Version of the policy (it can follow the semver format)"},"url":{"type":"string","format":"","example":"","description":"Permanent URL at which this very version of the Policy can be read, should not be allowed to change over time"},"jurisdiction":{"type":"string","format":"","example":"","description":"Jurisdiction"},"industrySector":{"type":"string","format":"","example":"","description":"Industry sector"},"dataRetentionPeriodDays":{"type":"integer","format":"","example":"","description":"Data retention period in days"},"geographicRestriction":{"type":"string","format":"","example":"","description":"Geographic restriction"},"storageLocation":{"type":"string","format":"","example":"","description":"Storage location"},"thirdPartyDataSharing":{"type":"boolean","format":"","example":true,"description":"Third party data sharing"}}},"dataAttributes":{"type":"array","items":{"allOf":[{"type":"object","description":"Data attributes contain specifications of exactly what is collected.","x-not-in-database":false,"required":["name","description"],"properties":{"id":{"type":"string","format":"","example":"","description":"Data attribute ID"},"name":{"type":"string","format":"","example":"","description":"Name of the attribute, for instance \"name\" or \"age\""},"description":{"type":"string","format":"","example":"","description":"Description of the attribute"},"sensitivity":{"type":"boolean","format":"","example":"","description":"Sensitivity of data attribute"},"category":{"type":"string","format":"","example":"","description":"Category of data attribute"},"scope":{"type":"string","format":"","example":"","description":"Scope required for data attribute"}}},{"type":"object","properties":{"restrictions":{"type":"array","items":{"type":"object","description":"List of restrictions","x-not-in-database":false,"properties":{"credDefId":{"type":"string","format":"","example":"H3DW1MUWZyBkP5LG4rTYRH:3:CL:80:default","description":"Credential definition ID"},"schemaId":{"type":"string","format":"","example":"H3DW1MUWZyBkP5LG4rTYRH:2:Certificate Of Registration:6.0.0","description":"Schema ID"}}}}}}]},"description":"Data attributes contain specifications of exactly what is collected.\n"},"purpose":{"type":"string","description":"Name of purpose"},"purposeDescription":{"type":"string","description":"Description of purpose"},"lawfulBasis":{"type":"string","format":"","example":"","description":"Lawful basis of the agreement - consent / legal_obligation / contract / vital_interest / public_task / legitimate_interest","enum":["consent","legal_obligation","contract","vital_interest","public_task","legitimate_interest"]},"methodOfUse":{"type":"string","format":"","example":"","description":"Method of use - null / data_source / data_using_service","enum":[null,"data_source","data_using_service"]},"dpiaDate":{"type":"string","format":"","example":"","description":"The date on which the DPIA report is generated after a DPIA"},"dpiaSummaryUrl":{"type":"string","description":"The URl providing the DPIA result reports, summary etc that can be verified by any interested parties"},"signature":{"x-fk-model":"Signature","description":"Signature of authorising party of DataAgreement (Signatures may be chained in the case of multiple signatures)\n","type":"object","title":"Signature","x-not-in-database":false,"required":["payload","signature","verificationMethod","verificationPayload","verificationPayloadHash","verificationSignedBy","timestamp"],"properties":{"id":{"type":"string","format":"","example":"","description":"Objects may be passed back by some API endpoints without an id (PK), denoting that they are a \"draft\", i.e. a Signature that is not yet stored in the database and only exists in transit."},"payload":{"type":"string","format":"","example":"","description":"The final payload that is signed, constructed as a JSON serialisation of fields {verificationPayload: ..., verificationPayloadHash: ..., verificationMethod: ..., verificationArtifact: ..., verificationSignedBy: ..., verificationJwsHeader, timestamp: ..., signedWithoutObjectReference: ..., objectType: ..., objectReference: ...}. Serialised as a JSON dict. If the signature is generated before anything is stored in the database (and has a PK), then the objectReference should be omitted from the payload but filled in afterwards."},"signature":{"type":"string","format":"","example":"","description":"Signature of payload hash, the format of the signature should be specified by either verificationMethod or verificationJwsHeader"},"verificationMethod":{"type":"string","format":"","example":"","description":"A well-known string denoting which method is used. Valid values: TBD. This might be expanded with supported verification methods. There may be a minimal set of supported methods necessary."},"verificationPayload":{"type":"string","format":"","example":"","description":"Internally generated serialised version of the data referenced by objectType and objectReference - by extracting and serialising their data as JSON"},"verificationPayloadHash":{"type":"string","format":"","example":"","description":"Internally generated cryptographic hash of the value to be signed, i.e. the value of verificationPayload"},"verificationArtifact":{"type":"string","format":"","example":"","description":"A verification artifact in the form of a scanned object, image, signature etc"},"verificationSignedBy":{"type":"string","format":"","example":"","description":"Because an identifier's information may change over time, there is a need to store that information at the time of signing. In the case of a cryptographic signature, this field should contain some identifier for looking up or verifying the public key of the signing party. In the case of a non-cryptographic signature, this field could contain a natural individual's names, personal number, email addresses - store a snapshot that binds to the signature at the time of signing. In the case of a cryptographic signature, this may be the fingerprint of the individual's public key or in some cases, a token from the user's ID session."},"verificationSignedAs":{"type":"string","format":"","example":"","description":"DRAFT FIELD: Specifies the relationship between the authorising signature and the invidual which the payload concerns. This is relevant for Consent Records. Possible values: \"individual\" / \"delegate\"."},"verificationJwsHeader":{"type":"string","format":"","example":"","description":"Alternative to the verificationMethod, verificationHash and verificationSignature, give a JWS serialised object (RFC7515)"},"timestamp":{"type":"string","format":"","example":"","description":"Timestamp of signature, currently this field isn't part of the payload so it's not tamper-proof"},"signedWithoutObjectReference":{"type":"boolean","format":"","example":"","description":"Indicates that objectReference was left blank in the serialised version that was signed"},"objectType":{"type":"string","format":"","example":"","description":"Name of the schema model that objectReference points to. Values: \"signature\" or \"revision\"","enum":["revision","signature"]},"objectReference":{"type":"string","format":"","example":"","description":"A symmetric relation / back reference to the objectType that was signed. We are currently just modelling signing another signature (a chain) or signing a Revision (which can be a revision of a consent record, an agreement, policy etc)."}}},"active":{"type":"boolean","format":"","example":"","description":"DataAgreement is active and new DataAgreementRecords can be created"},"forgettable":{"type":"boolean","format":"","example":"","description":"DataAgreementRecord may be deleted when consent is withdrawn, as its existence is not necessary for auditability."},"compatibleWithVersionId":{"type":"string","format":"","x-fk-model":"DataAgreement","description":"WIP: This field indicates that Data Agreement Records may be transferred from this  compatible previous revision of the same DataAgreement\n"},"lifecycle":{"type":"string","description":"WIP: Current Lifecycle state of the DataAgreement.  Lifecycle states are used to manage internal workflows and  should not be assigned semantic meanings for active Data Agreement Records.\n","enum":["draft","complete"]},"dataUsingServices":{"type":"array","items":[{"type":"object","description":"Data using service organisation for the data agreement","x-not-in-database":false,"required":["name","sector","location"],"properties":{"name":{"type":"string","format":"","example":"","description":"Name of the data using service organisation"},"sector":{"type":"string","format":"","example":"","description":"Defines sector of the organisation"},"location":{"type":"string","format":"","example":"","description":"Defines location of the organisation"},"privacyDashboardUrl":{"type":"string","format":"","example":"","description":"Defines privacy dashboard url of the organisation"}}}]},"openApiSpecification":{"type":"object","description":"This field contains OpenAPI specification document describing the API's endpoints, models, and operations."},"dataSources":{"type":"array","items":[{"type":"object","description":"Data source organisation for the data agreement","x-not-in-database":false,"required":["name","sector","location"],"properties":{"name":{"type":"string","format":"","example":"","description":"Name of the data source organisation"},"sector":{"type":"string","format":"","example":"","description":"Defines sector of the organisation"},"location":{"type":"string","format":"","example":"","description":"Defines location of the organisation"},"privacyDashboardUrl":{"type":"string","format":"","example":"","description":"Defines privacy dashboard url of the organisation"}}}]}}},{"type":"object","title":"DataAgreementExtras","required":["dataExchange"],"properties":{"dataExchange":{"type":"object","description":"Data exchange details","properties":{"dataExchangeProfile":{"type":"string","description":"Data exchange profile","enum":["AIP10"]},"id":{"type":"string","description":"Data agreement ID defined in AIP"},"credentialDefinitionId":{"type":"string","description":"Credential definition identifier"},"schemaId":{"type":"string","description":"Schema identifier"},"isExistingSchema":{"type":"boolean","description":"Is schema existing"},"qrId":{"type":"string"},"firebaseDynamicLink":{"type":"string"},"presentationRequest":{"type":"object","properties":{"name":{"type":"string","description":"Name of the presentation request"},"version":{"type":"string","description":"Version of the presentation request"},"requestedAttributes":{"type":"object","description":"Map of requested attributes","properties":{"name":{"type":"string","description":"Name of the requested attribute"},"restrictions":{"type":"array","items":{"type":"object","properties":{"schemaId":{"type":"string","description":"Schema identifier"},"credDefId":{"type":"string","description":"Credential definition identifier"}}},"description":"List of restrictions for the requested attribute"}}}},"components":{"schemas":{"restriction":{"type":"object","properties":{"schemaId":{"type":"string","description":"Schema identifier"},"credDefId":{"type":"string","description":"Credential definition identifier"}}},"requestedAttribute":{"type":"object","properties":{"name":{"type":"string","description":"Name of the requested attribute"},"restrictions":{"type":"array","items":{"type":"object","properties":{"schemaId":{"type":"string","description":"Schema identifier"},"credDefId":{"type":"string","description":"Credential definition identifier"}}},"description":"List of restrictions for the requested attribute"}}}}}}},"required":["isExistingSchema","schemaId"]}}}]},"revision":{"type":"object","title":"Revision","description":"A *generic* revision model captures the serialised contents of any schema's single row. This is then subject to 1) cryptographic signature and 2) auditing.\n\nAside from the \"successor\" column, a revision should be considered locked.","x-not-in-database":false,"required":["id","schemaName","objectId","objectData","serizalizedSnapshot","serializedHash","timestamp"],"properties":{"id":{"type":"string","format":"","example":"","description":"Revision ID"},"schemaName":{"type":"string","format":"","example":"","description":"Previously \"schema\" but for technical reasons should be called \"schemaName\"","enum":["dataAgreement","policy","dataAgreementRecord"]},"objectId":{"type":"string","format":"","example":"","description":"The PK of the object that was serialised"},"objectData":{"type":"string","format":"","example":"","description":"The object that is serialised"},"signedWithoutObjectId":{"type":"boolean","format":"","example":"","description":"Indicates that objectId was left blank in serizalizedSnapshot when calculating serializedHash. objectId may subsequently be filled in."},"serizalizedSnapshot":{"type":"string","format":"","example":"","description":"Revisioned data (sed as JSON) as a dict. Apply JSON Canonicalization Scheme as per IETF RFC 8785.  It contains all the fields of the schema except sucessorId, serializedHash, serializedSnapshot.\n"},"serializedHash":{"type":"string","format":"","example":"","description":"Hash of serizalizedSnapshot (SHA-1)"},"timestamp":{"type":"string","format":"","example":"","description":"Timestamp of when revisioning happened. It should be ISO 8601 UTC date time"},"authorizedByIndividualId":{"description":"Individual ID","type":"string"},"authorizedByOtherId":{"type":"string","format":"","example":"","description":"Reference to an admin user that has created this revision"},"successorId":{"x-fk-model":"Revision","type":"string","description":"If this revision is no longer the latest revision, refer to its successor"},"predecessorHash":{"type":"string","format":"","example":"","description":"Tamper-resistent artifact from previous record, copied from serializedHash"},"predecessorSignature":{"type":"string","format":"","example":"","description":"Tamper-resistent artifact from previous record (we don't know if the previous record was signed or not)"}}}},"type":"object"}}},"description":"","headers":{}},"400":{"description":"bad input parameter","headers":{}}}}
>
  
</StatusCodes>


      